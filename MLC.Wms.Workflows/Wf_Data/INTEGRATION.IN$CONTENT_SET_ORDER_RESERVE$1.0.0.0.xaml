<Activity mc:Ignorable="sap sap2010 sads" x:Class="MLC.Wms.Workflows.Wf_Data.SET_ORDER_RESERVE"
 xmlns="http://schemas.microsoft.com/netfx/2009/xaml/activities"
 xmlns:av="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
 xmlns:mca="clr-namespace:Microsoft.CSharp.Activities;assembly=System.Activities"
 xmlns:mwad="clr-namespace:MLC.WF.Activities.DataAccess;assembly=MLC.WF.Activities"
 xmlns:mwice="clr-namespace:MLC.Wms.Integration.Common.Exceptions;assembly=MLC.Wms.Integration.Common"
 xmlns:mwicm="clr-namespace:MLC.Wms.Integration.Common.Message;assembly=MLC.Wms.Integration.Common"
 xmlns:mwme="clr-namespace:MLC.Wms.Model.Entities;assembly=MLC.Wms.Model"
 xmlns:mwwab="clr-namespace:MLC.Wms.WF.Activities.Business;assembly=MLC.Wms.WF.Activities"
 xmlns:n="clr-namespace:NHibernate;assembly=NHibernate"
 xmlns:s="clr-namespace:System;assembly=mscorlib"
 xmlns:sads="http://schemas.microsoft.com/netfx/2010/xaml/activities/debugger"
 xmlns:sap="http://schemas.microsoft.com/netfx/2009/xaml/activities/presentation"
 xmlns:sap2010="http://schemas.microsoft.com/netfx/2010/xaml/activities/presentation"
 xmlns:scg="clr-namespace:System.Collections.Generic;assembly=mscorlib"
 xmlns:sco="clr-namespace:System.Collections.ObjectModel;assembly=mscorlib"
 xmlns:sl="clr-namespace:System.Linq;assembly=System.Core"
 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
  <x:Members>
    <x:Property Name="QueueMessage" Type="InArgument(mwme:IoQueueIn)" />
    <x:Property Name="MandantCode" Type="InArgument(x:String)" />
  </x:Members>
  <sap2010:ExpressionActivityEditor.ExpressionActivityEditor>C#</sap2010:ExpressionActivityEditor.ExpressionActivityEditor>
  <sap2010:WorkflowViewState.IdRef>MLC.Wms.Workflows.Wf_Data.SET_ORDER_RESERVE_1</sap2010:WorkflowViewState.IdRef>
  <TextExpression.NamespacesForImplementation>
    <sco:Collection x:TypeArguments="x:String">
      <x:String>System</x:String>
      <x:String>System.Collections.Generic</x:String>
      <x:String>System.Data</x:String>
      <x:String>System.Linq</x:String>
      <x:String>System.Text</x:String>
      <x:String>MLC.Wms.Api</x:String>
      <x:String>MLC.Wms.Integration.Common</x:String>
      <x:String>MLC.Wms.Integration.Common.Entities</x:String>
      <x:String>MLC.Wms.Integration.Common.Exceptions</x:String>
      <x:String>MLC.Wms.Integration.Common.Message</x:String>
      <x:String>MLC.Wms.Model.Entities</x:String>
      <x:String>NHibernate</x:String>
      <x:String>NHibernate.Linq</x:String>
    </sco:Collection>
  </TextExpression.NamespacesForImplementation>
  <TextExpression.ReferencesForImplementation>
    <sco:Collection x:TypeArguments="AssemblyReference">
      <AssemblyReference>Iesi.Collections</AssemblyReference>
      <AssemblyReference>log4net</AssemblyReference>
      <AssemblyReference>Microsoft.Activities.Extensions</AssemblyReference>
      <AssemblyReference>Microsoft.CSharp</AssemblyReference>
      <AssemblyReference>Microsoft.Practices.Unity</AssemblyReference>
      <AssemblyReference>Microsoft.Practices.Unity.Configuration</AssemblyReference>
      <AssemblyReference>Microsoft.Practices.Unity.RegistrationByConvention</AssemblyReference>
      <AssemblyReference>MLC.WF.Activities</AssemblyReference>
      <AssemblyReference>MLC.WF.Core</AssemblyReference>
      <AssemblyReference>Newtonsoft.Json</AssemblyReference>
      <AssemblyReference>NHibernate</AssemblyReference>
      <AssemblyReference>PresentationCore</AssemblyReference>
      <AssemblyReference>PresentationFramework</AssemblyReference>
      <AssemblyReference>Serialize.Linq</AssemblyReference>
      <AssemblyReference>System</AssemblyReference>
      <AssemblyReference>System.Activities</AssemblyReference>
      <AssemblyReference>System.Activities.DurableInstancing</AssemblyReference>
      <AssemblyReference>System.Activities.Presentation</AssemblyReference>
      <AssemblyReference>System.Configuration</AssemblyReference>
      <AssemblyReference>System.Core</AssemblyReference>
      <AssemblyReference>System.Data</AssemblyReference>
      <AssemblyReference>System.Drawing</AssemblyReference>
      <AssemblyReference>System.Linq.Dynamic</AssemblyReference>
      <AssemblyReference>System.Runtime.DurableInstancing</AssemblyReference>
      <AssemblyReference>System.Runtime.Serialization</AssemblyReference>
      <AssemblyReference>System.ServiceModel</AssemblyReference>
      <AssemblyReference>System.ServiceModel.Activities</AssemblyReference>
      <AssemblyReference>System.Web</AssemblyReference>
      <AssemblyReference>System.Xaml</AssemblyReference>
      <AssemblyReference>System.Xml</AssemblyReference>
      <AssemblyReference>System.Xml.Linq</AssemblyReference>
      <AssemblyReference>WebClient.Abac</AssemblyReference>
      <AssemblyReference>WebClient.Common</AssemblyReference>
      <AssemblyReference>WindowsBase</AssemblyReference>
      <AssemblyReference>MLC.Wms.Api</AssemblyReference>
      <AssemblyReference>MLC.Wms.Bootstrap</AssemblyReference>
      <AssemblyReference>MLC.Wms.Common</AssemblyReference>
      <AssemblyReference>MLC.Wms.Integration.Common</AssemblyReference>
      <AssemblyReference>MLC.Wms.Model</AssemblyReference>
      <AssemblyReference>MLC.Wms.WF.Activities</AssemblyReference>
      <AssemblyReference>mscorlib</AssemblyReference>
      <AssemblyReference>MLC.Wms.Workflows</AssemblyReference>
    </sco:Collection>
  </TextExpression.ReferencesForImplementation>
  <TryCatch sap2010:WorkflowViewState.IdRef="TryCatch_2">
    <TryCatch.Variables>
      <Variable x:TypeArguments="x:String" Default="DATA_LOAD_FEEDBACK" Name="feedbackQueueMessageTypeCode" />
      <Variable x:TypeArguments="x:String" Name="owbName" />
      <Variable x:TypeArguments="mwicm:UniversalCommandMessage" Name="response" />
    </TryCatch.Variables>
    <TryCatch.Try>
      <Flowchart DisplayName="Процесс" sap2010:WorkflowViewState.IdRef="Flowchart_8">
        <Flowchart.Variables>
          <Variable x:TypeArguments="x:Object" Name="exception" />
          <Variable x:TypeArguments="x:String" Name="owbId" />
          <Variable x:TypeArguments="mwme:WmsMandant" Name="mandant" />
          <Variable x:TypeArguments="n:ISession" Name="session" />
          <Variable x:TypeArguments="s:String[]" Name="statuses">
            <Variable.Default>
              <mca:CSharpValue x:TypeArguments="s:String[]">new string[] { "OWB_CREATED", "OWB_ACTIVATED_FREEZE", "OWB_ACTIVATED" }</mca:CSharpValue>
            </Variable.Default>
          </Variable>
          <Variable x:TypeArguments="scg:IEnumerable(mwme:WmsOWB)" Name="owbList" />
          <Variable x:TypeArguments="mwme:WmsOWB" Name="owb" />
          <Variable x:TypeArguments="mwme:WmsQRes" Name="qres" />
          <Variable x:TypeArguments="mwme:WmsEventHeader" Name="header" />
          <Variable x:TypeArguments="mwme:wmsEventDetailOWB" Name="detail" />
        </Flowchart.Variables>
        <Flowchart.StartNode>
          <FlowStep x:Name="__ReferenceID2" sap2010:WorkflowViewState.IdRef="FlowStep_41">
            <Assign sap2010:WorkflowViewState.IdRef="Assign_21">
              <Assign.To>
                <OutArgument x:TypeArguments="mwicm:UniversalCommandMessage">
                  <mca:CSharpReference x:TypeArguments="mwicm:UniversalCommandMessage">response</mca:CSharpReference>
                </OutArgument>
              </Assign.To>
              <Assign.Value>
                <InArgument x:TypeArguments="mwicm:UniversalCommandMessage">
                  <mca:CSharpValue x:TypeArguments="mwicm:UniversalCommandMessage">SerializationHelper.Deserialize&lt;UniversalCommandMessage&gt;(QueueMessage.Data)</mca:CSharpValue>
                </InArgument>
              </Assign.Value>
            </Assign>
            <FlowStep.Next>
              <FlowStep x:Name="__ReferenceID10" sap2010:WorkflowViewState.IdRef="FlowStep_73">
                <mwad:SessionGet sap2010:WorkflowViewState.IdRef="SessionGet_5">
                  <mwad:SessionGet.Session>
                    <OutArgument x:TypeArguments="n:ISession">
                      <mca:CSharpReference x:TypeArguments="n:ISession">session</mca:CSharpReference>
                    </OutArgument>
                  </mwad:SessionGet.Session>
                </mwad:SessionGet>
                <FlowStep.Next>
                  <FlowStep x:Name="__ReferenceID11" sap2010:WorkflowViewState.IdRef="FlowStep_72">
                    <Assign sap2010:WorkflowViewState.IdRef="Assign_44">
                      <Assign.To>
                        <OutArgument x:TypeArguments="mwme:WmsMandant">
                          <mca:CSharpReference x:TypeArguments="mwme:WmsMandant">mandant</mca:CSharpReference>
                        </OutArgument>
                      </Assign.To>
                      <Assign.Value>
                        <InArgument x:TypeArguments="mwme:WmsMandant">
                          <mca:CSharpValue x:TypeArguments="mwme:WmsMandant">session.Query&lt;WmsMandant&gt;().Single(i=&gt; i.PartnerCode == MandantCode)</mca:CSharpValue>
                        </InArgument>
                      </Assign.Value>
                    </Assign>
                    <FlowStep.Next>
                      <FlowDecision x:Name="__ReferenceID3" sap2010:WorkflowViewState.IdRef="FlowDecision_12">
                        <FlowDecision.Condition>
                          <mca:CSharpValue x:TypeArguments="x:Boolean" xml:space="preserve">response == null ||
!response.CommandList.Any(i =&gt; i.Name == "OWBName")</mca:CSharpValue>
                        </FlowDecision.Condition>
                        <FlowDecision.True>
                          <FlowStep x:Name="__ReferenceID4" sap2010:WorkflowViewState.IdRef="FlowStep_28">
                            <Throw sap2010:WorkflowViewState.IdRef="Throw_7">
                              <InArgument x:TypeArguments="s:Exception">
                                <mca:CSharpValue x:TypeArguments="s:Exception">new Exception("Ошибка. Не переданы входные данные (Message.Data).")</mca:CSharpValue>
                              </InArgument>
                            </Throw>
                          </FlowStep>
                        </FlowDecision.True>
                        <FlowDecision.False>
                          <FlowStep x:Name="__ReferenceID5" sap2010:WorkflowViewState.IdRef="FlowStep_71">
                            <Assign sap2010:WorkflowViewState.IdRef="Assign_45">
                              <Assign.To>
                                <OutArgument x:TypeArguments="x:String">
                                  <mca:CSharpReference x:TypeArguments="x:String">owbName</mca:CSharpReference>
                                </OutArgument>
                              </Assign.To>
                              <Assign.Value>
                                <InArgument x:TypeArguments="x:String">
                                  <mca:CSharpValue x:TypeArguments="x:String">response.CommandList.First(i =&gt; i.Name == "OWBName").Value</mca:CSharpValue>
                                </InArgument>
                              </Assign.Value>
                            </Assign>
                            <FlowStep.Next>
                              <FlowDecision x:Name="__ReferenceID7" sap2010:WorkflowViewState.IdRef="FlowDecision_20">
                                <FlowDecision.Condition>
                                  <mca:CSharpValue x:TypeArguments="x:Boolean">string.IsNullOrEmpty(owbName)</mca:CSharpValue>
                                </FlowDecision.Condition>
                                <FlowDecision.True>
                                  <FlowStep x:Name="__ReferenceID8" sap2010:WorkflowViewState.IdRef="FlowStep_56">
                                    <Throw sap2010:WorkflowViewState.IdRef="Throw_15">
                                      <InArgument x:TypeArguments="s:Exception">
                                        <mca:CSharpValue x:TypeArguments="s:Exception">new LogicalIntegrationException("Ошибка во входных параметрах. Не передан номер накладной (OWBName).")</mca:CSharpValue>
                                      </InArgument>
                                    </Throw>
                                  </FlowStep>
                                </FlowDecision.True>
                                <FlowDecision.False>
                                  <FlowStep x:Name="__ReferenceID6" sap2010:WorkflowViewState.IdRef="FlowStep_70">
                                    <Assign sap2010:WorkflowViewState.IdRef="Assign_46">
                                      <Assign.To>
                                        <OutArgument x:TypeArguments="x:String">
                                          <mca:CSharpReference x:TypeArguments="x:String">owbId</mca:CSharpReference>
                                        </OutArgument>
                                      </Assign.To>
                                      <Assign.Value>
                                        <InArgument x:TypeArguments="x:String">
                                          <mca:CSharpValue x:TypeArguments="x:String">response.CommandList.Any(i =&gt; i.Name == "OWBId") ? response.CommandList.First(i =&gt; i.Name == "OWBId").Value : string.Empty</mca:CSharpValue>
                                        </InArgument>
                                      </Assign.Value>
                                    </Assign>
                                    <FlowStep.Next>
                                      <FlowDecision x:Name="__ReferenceID9" sap2010:WorkflowViewState.IdRef="FlowDecision_19">
                                        <FlowDecision.Condition>
                                          <mca:CSharpValue x:TypeArguments="x:Boolean">string.IsNullOrEmpty(owbId)</mca:CSharpValue>
                                        </FlowDecision.Condition>
                                        <FlowDecision.True>
                                          <FlowDecision x:Name="__ReferenceID12" sap2010:WorkflowViewState.IdRef="FlowDecision_17">
                                            <FlowDecision.Condition>
                                              <mca:CSharpValue x:TypeArguments="x:Boolean">mandant.PartnerLocked</mca:CSharpValue>
                                            </FlowDecision.Condition>
                                            <FlowDecision.True>
                                              <FlowStep x:Name="__ReferenceID13" sap2010:WorkflowViewState.IdRef="FlowStep_57">
                                                <Throw sap2010:WorkflowViewState.IdRef="Throw_16">
                                                  <InArgument x:TypeArguments="s:Exception">
                                                    <mca:CSharpValue x:TypeArguments="s:Exception">new LogicalIntegrationException(string.Format("Мандант '{0}' не заблокирован", MandantCode))</mca:CSharpValue>
                                                  </InArgument>
                                                </Throw>
                                              </FlowStep>
                                            </FlowDecision.True>
                                            <FlowDecision.False>
                                              <FlowStep x:Name="__ReferenceID14" sap2010:WorkflowViewState.IdRef="FlowStep_68">
                                                <Assign sap2010:WorkflowViewState.IdRef="Assign_47">
                                                  <Assign.To>
                                                    <OutArgument x:TypeArguments="scg:IEnumerable(mwme:WmsOWB)">
                                                      <mca:CSharpReference x:TypeArguments="scg:IEnumerable(mwme:WmsOWB)">owbList</mca:CSharpReference>
                                                    </OutArgument>
                                                  </Assign.To>
                                                  <Assign.Value>
                                                    <InArgument x:TypeArguments="sl:IQueryable(mwme:WmsOWB)">
                                                      <mca:CSharpValue x:TypeArguments="sl:IQueryable(mwme:WmsOWB)">session.Query&lt;WmsOWB&gt;().Where(i =&gt; i.OWBName.ToUpper() == owbName.ToUpper() &amp;&amp; i.Partner == mandant)</mca:CSharpValue>
                                                    </InArgument>
                                                  </Assign.Value>
                                                </Assign>
                                                <FlowStep.Next>
                                                  <FlowSwitch x:TypeArguments="x:Int32" x:Name="__ReferenceID16" sap2010:WorkflowViewState.IdRef="FlowSwitch`1_1">
                                                    <FlowSwitch.Default>
                                                      <FlowStep x:Name="__ReferenceID17" sap2010:WorkflowViewState.IdRef="FlowStep_58">
                                                        <Throw sap2010:WorkflowViewState.IdRef="Throw_17">
                                                          <InArgument x:TypeArguments="s:Exception">
                                                            <mca:CSharpValue x:TypeArguments="s:Exception">new LogicalIntegrationException("Найдено более 1-й накладной")</mca:CSharpValue>
                                                          </InArgument>
                                                        </Throw>
                                                      </FlowStep>
                                                    </FlowSwitch.Default>
                                                    <FlowSwitch.Expression>
                                                      <mca:CSharpValue x:TypeArguments="x:Int32">owbList == null ? 0 : owbList.Count()</mca:CSharpValue>
                                                    </FlowSwitch.Expression>
                                                    <FlowStep x:Key="1" x:Name="__ReferenceID18" sap2010:WorkflowViewState.IdRef="FlowStep_66">
                                                      <Assign sap2010:WorkflowViewState.IdRef="Assign_48">
                                                        <Assign.To>
                                                          <OutArgument x:TypeArguments="mwme:WmsOWB">
                                                            <mca:CSharpReference x:TypeArguments="mwme:WmsOWB">owb</mca:CSharpReference>
                                                          </OutArgument>
                                                        </Assign.To>
                                                        <Assign.Value>
                                                          <InArgument x:TypeArguments="mwme:WmsOWB">
                                                            <mca:CSharpValue x:TypeArguments="mwme:WmsOWB">owbList.First()</mca:CSharpValue>
                                                          </InArgument>
                                                        </Assign.Value>
                                                      </Assign>
                                                      <FlowStep.Next>
                                                        <FlowDecision x:Name="__ReferenceID1" sap2010:WorkflowViewState.IdRef="FlowDecision_16">
                                                          <FlowDecision.Condition>
                                                            <mca:CSharpValue x:TypeArguments="x:Boolean">statuses.Contains(owb.Status.StatusCode)</mca:CSharpValue>
                                                          </FlowDecision.Condition>
                                                          <FlowDecision.True>
                                                            <FlowStep x:Name="__ReferenceID20" sap2010:WorkflowViewState.IdRef="FlowStep_64">
                                                              <Assign sap2010:WorkflowViewState.IdRef="Assign_49">
                                                                <Assign.To>
                                                                  <OutArgument x:TypeArguments="mwme:WmsQRes">
                                                                    <mca:CSharpReference x:TypeArguments="mwme:WmsQRes">qres</mca:CSharpReference>
                                                                  </OutArgument>
                                                                </Assign.To>
                                                                <Assign.Value>
                                                                  <InArgument x:TypeArguments="mwme:WmsQRes">
                                                                    <mca:CSharpValue x:TypeArguments="mwme:WmsQRes" xml:space="preserve">new WmsQRes
            {
                OWB = owb,
                OWBPriority_r = owb.OWBPriority,
                OWBProductNeed_r = owb.OWBProductNeed,
                Partner = owb.Partner,
                StatusCode_r = "QRES_CREATED",
                OWBReservType_r = owb.OWBReservType
            }</mca:CSharpValue>
                                                                  </InArgument>
                                                                </Assign.Value>
                                                              </Assign>
                                                              <FlowStep.Next>
                                                                <FlowStep x:Name="__ReferenceID21" sap2010:WorkflowViewState.IdRef="FlowStep_63">
                                                                  <mwad:EntityAdd Entities="{x:Null}" sap2010:WorkflowViewState.IdRef="EntityAdd_3">
                                                                    <mwad:EntityAdd.Entity>
                                                                      <InArgument x:TypeArguments="x:Object">
                                                                        <mca:CSharpValue x:TypeArguments="x:Object">qres</mca:CSharpValue>
                                                                      </InArgument>
                                                                    </mwad:EntityAdd.Entity>
                                                                  </mwad:EntityAdd>
                                                                  <FlowStep.Next>
                                                                    <FlowStep x:Name="__ReferenceID22" sap2010:WorkflowViewState.IdRef="FlowStep_62">
                                                                      <Assign sap2010:WorkflowViewState.IdRef="Assign_50">
                                                                        <Assign.To>
                                                                          <OutArgument x:TypeArguments="mwme:WmsEventHeader">
                                                                            <mca:CSharpReference x:TypeArguments="mwme:WmsEventHeader">header</mca:CSharpReference>
                                                                          </OutArgument>
                                                                        </Assign.To>
                                                                        <Assign.Value>
                                                                          <InArgument x:TypeArguments="mwme:WmsEventHeader">
                                                                            <mca:CSharpValue x:TypeArguments="mwme:WmsEventHeader" xml:space="preserve">new WmsEventHeader
            {
                ClientType = session.Query&lt;SysClientType&gt;().Single(i =&gt; i.ClientTypeCode == "WEB"),
                EventKind = session.Query&lt;WmsEventKind&gt;().Single(i =&gt; i.EventKindCode == "OWB_PROCESSING"),
                Operation = session.Query&lt;BillOperation&gt;().Single(i =&gt; i.OperationCode == "OP_OPERATOR_OWBPROCESSING"),
                EventHeaderStartTime = DateTime.Now,
                EventHeaderOperationBusiness = session.Query&lt;SYSENUM_OPERATION_BUSINESS&gt;().Single(i =&gt; i.EnumValue == "UNKNOWN"),
                Status = session.Query&lt;WmsEventHeaderStatus&gt;().Single(i =&gt; i.StatusCode == "EVENT_CREATED"),
                //EventHeaderBillStatus = session.Query&lt;EventHeaderBillStatus&gt;().Single(i =&gt; i.StatusCode == "EVENT_BILL_OPEN"),
                Partner = mandant,
                EventHeaderInstance = "WmsAPI",
                Work = null,
                Working = null,
                Process = null,
            }</mca:CSharpValue>
                                                                          </InArgument>
                                                                        </Assign.Value>
                                                                      </Assign>
                                                                      <FlowStep.Next>
                                                                        <FlowStep x:Name="__ReferenceID23" sap2010:WorkflowViewState.IdRef="FlowStep_61">
                                                                          <Assign sap2010:WorkflowViewState.IdRef="Assign_51">
                                                                            <Assign.To>
                                                                              <OutArgument x:TypeArguments="mwme:wmsEventDetailOWB">
                                                                                <mca:CSharpReference x:TypeArguments="mwme:wmsEventDetailOWB">detail</mca:CSharpReference>
                                                                              </OutArgument>
                                                                            </Assign.To>
                                                                            <Assign.Value>
                                                                              <InArgument x:TypeArguments="mwme:wmsEventDetailOWB">
                                                                                <mca:CSharpValue x:TypeArguments="mwme:wmsEventDetailOWB" xml:space="preserve">new wmsEventDetailOWB
            {
                EventKindCode_r = "OWB_PROCESSING",
                FactoryID_r = null,
                OWBID_r = owb.OWBID,
                OWBName = owb.OWBName,
                OWBStatusCode_r = owb.Status.StatusCode,
                QResID_r = qres.QResID,
                Partner = owb.Partner,
                StatusCode_r = "EVENT_CREATED"
            }</mca:CSharpValue>
                                                                              </InArgument>
                                                                            </Assign.Value>
                                                                          </Assign>
                                                                          <FlowStep.Next>
                                                                            <FlowStep x:Name="__ReferenceID24" sap2010:WorkflowViewState.IdRef="FlowStep_60">
                                                                              <mwwab:ExecuteWmsApi Exception="{x:Null}" Result="{x:Null}" DisplayName="Execute RegEvent" sap2010:WorkflowViewState.IdRef="ExecuteWmsApi_5" Name="RegEvent">
                                                                                <mwwab:ExecuteWmsApi.Parameters>
                                                                                  <InArgument x:TypeArguments="scg:Dictionary(x:String, x:Object)">
                                                                                    <mca:CSharpValue x:TypeArguments="scg:Dictionary(x:String, x:Object)" xml:space="preserve">new Dictionary&lt;string, object&gt;
         {
            {"session", session},
            {"eventHeader", header},
            {"eventDetail", detail},
            {"timeout", null}
        }</mca:CSharpValue>
                                                                                  </InArgument>
                                                                                </mwwab:ExecuteWmsApi.Parameters>
                                                                              </mwwab:ExecuteWmsApi>
                                                                              <FlowStep.Next>
                                                                                <FlowStep x:Name="__ReferenceID25" sap2010:WorkflowViewState.IdRef="FlowStep_59">
                                                                                  <Assign sap2010:WorkflowViewState.IdRef="Assign_52">
                                                                                    <Assign.To>
                                                                                      <OutArgument x:TypeArguments="mwme:WmsOWBStatus">
                                                                                        <mca:CSharpReference x:TypeArguments="mwme:WmsOWBStatus">owb.Status</mca:CSharpReference>
                                                                                      </OutArgument>
                                                                                    </Assign.To>
                                                                                    <Assign.Value>
                                                                                      <InArgument x:TypeArguments="mwme:WmsOWBStatus">
                                                                                        <mca:CSharpValue x:TypeArguments="mwme:WmsOWBStatus">session.Query&lt;WmsOWBStatus&gt;().Single(i =&gt; i.StatusCode == "OWB_PROCESSING")</mca:CSharpValue>
                                                                                      </InArgument>
                                                                                    </Assign.Value>
                                                                                  </Assign>
                                                                                </FlowStep>
                                                                              </FlowStep.Next>
                                                                            </FlowStep>
                                                                          </FlowStep.Next>
                                                                        </FlowStep>
                                                                      </FlowStep.Next>
                                                                    </FlowStep>
                                                                  </FlowStep.Next>
                                                                </FlowStep>
                                                              </FlowStep.Next>
                                                            </FlowStep>
                                                          </FlowDecision.True>
                                                          <FlowDecision.False>
                                                            <FlowStep x:Name="__ReferenceID19" sap2010:WorkflowViewState.IdRef="FlowStep_65">
                                                              <Throw sap2010:WorkflowViewState.IdRef="Throw_18">
                                                                <InArgument x:TypeArguments="s:Exception">
                                                                  <mca:CSharpValue x:TypeArguments="s:Exception">new LogicalIntegrationException(string.Format("Накладная не в разрешенном статусе '{0}({1})'", owb.Status.StatusName, owb.Status.StatusCode))</mca:CSharpValue>
                                                                </InArgument>
                                                              </Throw>
                                                            </FlowStep>
                                                          </FlowDecision.False>
                                                        </FlowDecision>
                                                      </FlowStep.Next>
                                                    </FlowStep>
                                                    <FlowStep x:Key="0" x:Name="__ReferenceID0" sap2010:WorkflowViewState.IdRef="FlowStep_67">
                                                      <Throw sap2010:WorkflowViewState.IdRef="Throw_19">
                                                        <InArgument x:TypeArguments="s:Exception">
                                                          <mca:CSharpValue x:TypeArguments="s:Exception">new LogicalIntegrationException(string.Format("Накладная '{0}' не найдена", owbName))</mca:CSharpValue>
                                                        </InArgument>
                                                      </Throw>
                                                    </FlowStep>
                                                  </FlowSwitch>
                                                </FlowStep.Next>
                                              </FlowStep>
                                            </FlowDecision.False>
                                          </FlowDecision>
                                        </FlowDecision.True>
                                        <FlowDecision.False>
                                          <FlowStep x:Name="__ReferenceID15" sap2010:WorkflowViewState.IdRef="FlowStep_69">
                                            <Assign sap2010:WorkflowViewState.IdRef="Assign_53">
                                              <Assign.To>
                                                <OutArgument x:TypeArguments="mwme:WmsOWB">
                                                  <mca:CSharpReference x:TypeArguments="mwme:WmsOWB">owb</mca:CSharpReference>
                                                </OutArgument>
                                              </Assign.To>
                                              <Assign.Value>
                                                <InArgument x:TypeArguments="mwme:WmsOWB">
                                                  <mca:CSharpValue x:TypeArguments="mwme:WmsOWB">session.Query&lt;WmsOWB&gt;().FirstOrDefault(i=&gt; i.OWBID.ToString() == owbId)</mca:CSharpValue>
                                                </InArgument>
                                              </Assign.Value>
                                            </Assign>
                                            <FlowStep.Next>
                                              <FlowDecision x:Name="__ReferenceID26" sap2010:WorkflowViewState.IdRef="FlowDecision_18">
                                                <FlowDecision.Condition>
                                                  <mca:CSharpValue x:TypeArguments="x:Boolean">owb == null</mca:CSharpValue>
                                                </FlowDecision.Condition>
                                                <FlowDecision.True>
                                                  <x:Reference>__ReferenceID0</x:Reference>
                                                </FlowDecision.True>
                                                <FlowDecision.False>
                                                  <x:Reference>__ReferenceID1</x:Reference>
                                                </FlowDecision.False>
                                              </FlowDecision>
                                            </FlowStep.Next>
                                          </FlowStep>
                                        </FlowDecision.False>
                                      </FlowDecision>
                                    </FlowStep.Next>
                                  </FlowStep>
                                </FlowDecision.False>
                              </FlowDecision>
                            </FlowStep.Next>
                          </FlowStep>
                        </FlowDecision.False>
                      </FlowDecision>
                    </FlowStep.Next>
                  </FlowStep>
                </FlowStep.Next>
              </FlowStep>
            </FlowStep.Next>
          </FlowStep>
        </Flowchart.StartNode>
        <x:Reference>__ReferenceID2</x:Reference>
        <x:Reference>__ReferenceID3</x:Reference>
        <x:Reference>__ReferenceID4</x:Reference>
        <x:Reference>__ReferenceID5</x:Reference>
        <x:Reference>__ReferenceID6</x:Reference>
        <x:Reference>__ReferenceID7</x:Reference>
        <x:Reference>__ReferenceID8</x:Reference>
        <x:Reference>__ReferenceID9</x:Reference>
        <x:Reference>__ReferenceID10</x:Reference>
        <x:Reference>__ReferenceID11</x:Reference>
        <x:Reference>__ReferenceID12</x:Reference>
        <x:Reference>__ReferenceID13</x:Reference>
        <x:Reference>__ReferenceID14</x:Reference>
        <x:Reference>__ReferenceID15</x:Reference>
        <x:Reference>__ReferenceID16</x:Reference>
        <x:Reference>__ReferenceID17</x:Reference>
        <x:Reference>__ReferenceID0</x:Reference>
        <x:Reference>__ReferenceID18</x:Reference>
        <x:Reference>__ReferenceID1</x:Reference>
        <x:Reference>__ReferenceID19</x:Reference>
        <x:Reference>__ReferenceID20</x:Reference>
        <x:Reference>__ReferenceID21</x:Reference>
        <x:Reference>__ReferenceID22</x:Reference>
        <x:Reference>__ReferenceID23</x:Reference>
        <x:Reference>__ReferenceID24</x:Reference>
        <x:Reference>__ReferenceID25</x:Reference>
        <x:Reference>__ReferenceID26</x:Reference>
      </Flowchart>
    </TryCatch.Try>
    <TryCatch.Catches>
      <Catch x:TypeArguments="mwice:LogicalIntegrationException" sap2010:WorkflowViewState.IdRef="Catch`1_6">
        <ActivityAction x:TypeArguments="mwice:LogicalIntegrationException">
          <ActivityAction.Argument>
            <DelegateInArgument x:TypeArguments="mwice:LogicalIntegrationException" Name="logicalEx" />
          </ActivityAction.Argument>
          <Sequence DisplayName="Добавляем параметры LogicalIntegrationException" sap2010:WorkflowViewState.IdRef="Sequence_6">
            <Assign DisplayName="Uri" sap2010:WorkflowViewState.IdRef="Assign_41">
              <Assign.To>
                <OutArgument x:TypeArguments="x:String">
                  <mca:CSharpReference x:TypeArguments="x:String">logicalEx.Selector</mca:CSharpReference>
                </OutArgument>
              </Assign.To>
              <Assign.Value>
                <InArgument x:TypeArguments="x:String">
                  <mca:CSharpValue x:TypeArguments="x:String">string.Format("ENTITY=OWB;ENTITYKEY={0};QUEUEMESSAGETYPE=SET_ORDER_RESERVE;", owbName)</mca:CSharpValue>
                </InArgument>
              </Assign.Value>
            </Assign>
            <Assign DisplayName="QueueMessageTypeName" sap2010:WorkflowViewState.IdRef="Assign_42">
              <Assign.To>
                <OutArgument x:TypeArguments="x:String">
                  <mca:CSharpReference x:TypeArguments="x:String">logicalEx.QueueMessageTypeName</mca:CSharpReference>
                </OutArgument>
              </Assign.To>
              <Assign.Value>
                <InArgument x:TypeArguments="x:String">
                  <mca:CSharpValue x:TypeArguments="x:String">feedbackQueueMessageTypeCode</mca:CSharpValue>
                </InArgument>
              </Assign.Value>
            </Assign>
            <Assign DisplayName="QueueMessageTypeName">
              <Assign.To>
                <OutArgument x:TypeArguments="x:String">
                  <mca:CSharpReference x:TypeArguments="x:String">logicalEx.QueueMessageTypeName</mca:CSharpReference>
                </OutArgument>
              </Assign.To>
              <Assign.Value>
                <InArgument x:TypeArguments="x:String">
                  <mca:CSharpValue x:TypeArguments="x:String">feedbackQueueMessageTypeCode</mca:CSharpValue>
                </InArgument>
              </Assign.Value>
              <sap2010:WorkflowViewState.IdRef>Assign_54</sap2010:WorkflowViewState.IdRef>
            </Assign>
            <Assign DisplayName="QueueMessageTypeName">
              <Assign.To>
                <OutArgument x:TypeArguments="mwicm:ErrorMessage">
                  <mca:CSharpReference x:TypeArguments="mwicm:ErrorMessage">logicalEx.ErrorMessage</mca:CSharpReference>
                </OutArgument>
              </Assign.To>
              <Assign.Value>
                <InArgument x:TypeArguments="mwicm:ErrorMessage">
                  <mca:CSharpValue x:TypeArguments="mwicm:ErrorMessage" xml:space="preserve">new ErrorMessage()
            {
                CommandList = response != null &amp;&amp; response.CommandList.Any() ? response.CommandList : null,
                ErrorInfoList = new List&lt;ErrorInfo&gt;()
                {
                    new ErrorInfo()
                    {
                         Message = logicalEx.Message,
                         Uri = string.Format("ENTITYKEY={0};ENTITY=OWB;", owbName),
                         ErrorType = "ErrorInfoLogical",
                         CallStack = logicalEx.StackTrace
                    }
                }

            }</mca:CSharpValue>
                </InArgument>
              </Assign.Value>
              <sap2010:WorkflowViewState.IdRef>Assign_55</sap2010:WorkflowViewState.IdRef>
            </Assign>
            <Throw sap2010:WorkflowViewState.IdRef="Throw_13">
              <InArgument x:TypeArguments="s:Exception">
                <mca:CSharpValue x:TypeArguments="s:Exception">logicalEx</mca:CSharpValue>
              </InArgument>
            </Throw>
          </Sequence>
        </ActivityAction>
      </Catch>
      <Catch x:TypeArguments="s:Exception" sap2010:WorkflowViewState.IdRef="Catch`1_7">
        <ActivityAction x:TypeArguments="s:Exception">
          <ActivityAction.Argument>
            <DelegateInArgument x:TypeArguments="s:Exception" Name="ex" />
          </ActivityAction.Argument>
          <Throw sap2010:WorkflowViewState.IdRef="Throw_14">
            <InArgument x:TypeArguments="s:Exception">
              <mca:CSharpValue x:TypeArguments="s:Exception" xml:space="preserve">new TechnicalIntegrationException(string.Format("При расчете маршрута возникла техническая ошибка: {0} {1}", ex.Message, ex.InnerException))
       {
            CallStack = ex.StackTrace,
            Uri = "ENTITY=OWB; QUEUEMESSAGETYPE=SET_ORDER_ROUTES;",
            QueueMessageTypeName = feedbackQueueMessageTypeCode
       }</mca:CSharpValue>
            </InArgument>
          </Throw>
        </ActivityAction>
      </Catch>
    </TryCatch.Catches>
    <sads:DebugSymbol.Symbol>d3VEOlxQcm9qZWN0XE1MQy5XbXMuV2ViQXBwXHNyY1xNTEMuV21zXE1MQy5XbXMuV29ya2Zsb3dzXFdmX0RhdGFcSU5URUdSQVRJT04uSU4kQ09OVEVOVF9TRVRfT1JERVJfUkVTRVJWRSQxLjAuMC4wLnhhbWxQWQPRBA4CAQFbNFtIAgFPYAftAxMCAVD1Awu7BBYCAQrDBAvMBBMCAQJoD2iWAQIBUXMNfhYDAbUFgQERhwEjAwGkBYoBFZUBHgMBgwWZARuaAUkDAfMEpwEdsgEmAwHSBLYBI7YBfwMBwgTDASXOAS4DAaEE0gEr0gGFAQMBkQSnAy2yAzYDAfADtgMztgN9AwHgA44CPY4CpAEDAdADjgM/kgNHAwG/A5ICP6UCSAMBngOoAkOuAlQDAY0DsQJHygJQAwHsAs0CS+ICVAMBywLlAk/xAmUDAbkC9AJT/wJcAwGYApkDN50DPwMBhwLXAS/XAYMBAwH3AeQBMe8BOgMB1gH8ATf8AZkBAwHGAfQBOfgBQQMBtQH/ATeKAkADAZQB2wEx3wE5AwGDAboBJb4BLQIBcp4BHaIBJQIBYfYDDYEEFgIBQIIEDY0EFgIBMY4EDZoEFgIBIpsEDbUEFgIBE7YEDboEFQIBC8UED8oEGwIBA3sTe7cBAwHGBXYTdnYDAbYFhAEXhAFmAwGlBZIBG5IBrQEDAZQFjQEbjQFvAwGEBa8BI68BngEDAeMEqgEjqgFwAwHTBMsBK8sB6QEDAbIExgErxgF2AwGiBK8DM68DxAEDAYEEqgMzqgN/AwHxA5ADQ5ADkQIDAcADmgJFogIgAwGvA5UCRZUCkwEDAZ8DqwJJqwKLAQMBjgO5Ak3HAiADAf0CtAJNtAKkAQMB7QLVAlHfAiADAdwC0AJR0AKrAQMBzALoAlXuAhwDAbsC5QLhAeUC6wEDAboC/AJZ/AL0AQMBqQL3Aln3ArIBAwGZApsDO5sD0QEDAYgC7AE37AH8AQMB5wHnATfnAZgBAwHXAfYBPfYBvAEDAbYBhwI9hwKNAQMBpQGCAj2CAokBAwGVAd0BNd0B0gEDAYQBvAEpvAHQAQIBc6ABIaABpQECAWL+AxP+A6cBAgFI+QMT+QNrAgFBigQTigRtAgE5hQQThQR3AgEylgQTlgRtAgEqkQQTkQR3AgEjowQTsQQgAgEbngQTngR5AgEUuAQRuARbAgEM</sads:DebugSymbol.Symbol>
  </TryCatch>
  <sap2010:WorkflowViewState.ViewStateManager>
    <sap2010:ViewStateManager>
      <sap2010:ViewStateData Id="Assign_21" sap:VirtualizedContainerService.HintSize="242,62">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="SessionGet_5" sap:VirtualizedContainerService.HintSize="200,22">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="Assign_44" sap:VirtualizedContainerService.HintSize="242,62">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="Throw_7" sap:VirtualizedContainerService.HintSize="200,22">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowStep_28">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <av:Point x:Key="ShapeLocation">40,499</av:Point>
            <av:Size x:Key="ShapeSize">200,22</av:Size>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="Assign_45" sap:VirtualizedContainerService.HintSize="242,62">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="Throw_15" sap:VirtualizedContainerService.HintSize="200,22">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowStep_56">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <av:Point x:Key="ShapeLocation">220,729</av:Point>
            <av:Size x:Key="ShapeSize">200,22</av:Size>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="Assign_46" sap:VirtualizedContainerService.HintSize="242,62">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="Throw_16" sap:VirtualizedContainerService.HintSize="200,22">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowStep_57">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <av:Point x:Key="ShapeLocation">230,1079</av:Point>
            <av:Size x:Key="ShapeSize">200,22</av:Size>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="Assign_47" sap:VirtualizedContainerService.HintSize="242,62">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="Throw_17" sap:VirtualizedContainerService.HintSize="200,22">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowStep_58">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <av:Point x:Key="ShapeLocation">270,1229</av:Point>
            <av:Size x:Key="ShapeSize">200,22</av:Size>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="Assign_48" sap:VirtualizedContainerService.HintSize="242,62">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="Assign_49" sap:VirtualizedContainerService.HintSize="242,62">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="EntityAdd_3" sap:VirtualizedContainerService.HintSize="200,62">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="Assign_50" sap:VirtualizedContainerService.HintSize="242,62">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="Assign_51" sap:VirtualizedContainerService.HintSize="242,62">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="ExecuteWmsApi_5" sap:VirtualizedContainerService.HintSize="200,22" />
      <sap2010:ViewStateData Id="Assign_52" sap:VirtualizedContainerService.HintSize="242,62">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowStep_59">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <av:Point x:Key="ShapeLocation">339,2159</av:Point>
            <av:Size x:Key="ShapeSize">242,62</av:Size>
            <av:PointCollection x:Key="ConnectorLocation">440,2159 440,2109</av:PointCollection>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowStep_60">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <av:Point x:Key="ShapeLocation">360,2099</av:Point>
            <av:Size x:Key="ShapeSize">200,22</av:Size>
            <av:PointCollection x:Key="ConnectorLocation">460,2121 460,2159</av:PointCollection>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowStep_61">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <av:Point x:Key="ShapeLocation">339,1979</av:Point>
            <av:Size x:Key="ShapeSize">242,62</av:Size>
            <av:PointCollection x:Key="ConnectorLocation">460,2041 460,2099</av:PointCollection>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowStep_62">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <av:Point x:Key="ShapeLocation">339,1869</av:Point>
            <av:Size x:Key="ShapeSize">242,62</av:Size>
            <av:PointCollection x:Key="ConnectorLocation">460,1931 460,1979</av:PointCollection>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowStep_63">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <av:Point x:Key="ShapeLocation">360,1759</av:Point>
            <av:Size x:Key="ShapeSize">200,62</av:Size>
            <av:PointCollection x:Key="ConnectorLocation">460,1821 460,1869</av:PointCollection>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowStep_64">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <av:Point x:Key="ShapeLocation">339,1649</av:Point>
            <av:Size x:Key="ShapeSize">242,62</av:Size>
            <av:PointCollection x:Key="ConnectorLocation">460,1711 460,1759</av:PointCollection>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="Throw_18" sap:VirtualizedContainerService.HintSize="200,22">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowStep_65">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <av:Point x:Key="ShapeLocation">710,1649</av:Point>
            <av:Size x:Key="ShapeSize">200,22</av:Size>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowDecision_16" sap:VirtualizedContainerService.HintSize="70,87">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
            <av:Point x:Key="ShapeLocation">605,1516.5</av:Point>
            <av:Size x:Key="ShapeSize">70,87</av:Size>
            <av:PointCollection x:Key="FalseConnector">675,1560 810,1560 810,1649</av:PointCollection>
            <av:PointCollection x:Key="TrueConnector">605,1560 460,1560 460,1649</av:PointCollection>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowStep_66">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <av:Point x:Key="ShapeLocation">179,1369</av:Point>
            <av:Size x:Key="ShapeSize">242,62</av:Size>
            <av:PointCollection x:Key="ConnectorLocation">300,1431 300,1461 640,1461 640,1516.5</av:PointCollection>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="Throw_19" sap:VirtualizedContainerService.HintSize="200,22">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowStep_67">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <av:Point x:Key="ShapeLocation">560,1359</av:Point>
            <av:Size x:Key="ShapeSize">200,22</av:Size>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowSwitch`1_1" sap:VirtualizedContainerService.HintSize="70,87">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
            <av:Point x:Key="ShapeLocation">605,1206.5</av:Point>
            <av:Size x:Key="ShapeSize">70,87</av:Size>
            <av:PointCollection x:Key="Default">605,1228.25 575,1228.25 575,1240 470,1240</av:PointCollection>
            <av:PointCollection x:Key="0Connector">675,1250 790,1250 790,1370 760,1370</av:PointCollection>
            <av:PointCollection x:Key="1Connector">640,1293.5 640,1323.5 300,1323.5 300,1369</av:PointCollection>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowStep_68">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <av:Point x:Key="ShapeLocation">519,1099</av:Point>
            <av:Size x:Key="ShapeSize">242,62</av:Size>
            <av:PointCollection x:Key="ConnectorLocation">640,1161 640,1206.5</av:PointCollection>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowDecision_17" sap:VirtualizedContainerService.HintSize="70,87">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
            <av:Point x:Key="ShapeLocation">445,966.5</av:Point>
            <av:Size x:Key="ShapeSize">70,87</av:Size>
            <av:PointCollection x:Key="FalseConnector">515,1010 640,1010 640,1099</av:PointCollection>
            <av:PointCollection x:Key="TrueConnector">445,1010 330,1010 330,1079</av:PointCollection>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="Assign_53" sap:VirtualizedContainerService.HintSize="242,62">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowDecision_18" sap:VirtualizedContainerService.HintSize="70,87">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
            <av:Point x:Key="ShapeLocation">885,1116.5</av:Point>
            <av:Size x:Key="ShapeSize">70,87</av:Size>
            <av:PointCollection x:Key="FalseConnector">955,1160 970,1160 970,1486.5 640,1486.5 640,1516.5</av:PointCollection>
            <av:PointCollection x:Key="TrueConnector">885,1160 855,1160 855,1370 760,1370</av:PointCollection>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowStep_69">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <av:Point x:Key="ShapeLocation">709,989</av:Point>
            <av:Size x:Key="ShapeSize">242,62</av:Size>
            <av:PointCollection x:Key="ConnectorLocation">830,1051 830,1081 920,1081 920,1116.5</av:PointCollection>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowDecision_19" sap:VirtualizedContainerService.HintSize="70,87">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
            <av:Point x:Key="ShapeLocation">565,856.5</av:Point>
            <av:Size x:Key="ShapeSize">70,87</av:Size>
            <av:PointCollection x:Key="FalseConnector">635,900 830,900 830,989</av:PointCollection>
            <av:PointCollection x:Key="TrueConnector">565,900 480,900 480,966.5</av:PointCollection>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowStep_70">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <av:Point x:Key="ShapeLocation">479,729</av:Point>
            <av:Size x:Key="ShapeSize">242,62</av:Size>
            <av:PointCollection x:Key="ConnectorLocation">600,791 600,856.5</av:PointCollection>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowDecision_20" sap:VirtualizedContainerService.HintSize="70,87">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
            <av:Point x:Key="ShapeLocation">435,596.5</av:Point>
            <av:Size x:Key="ShapeSize">70,87</av:Size>
            <av:PointCollection x:Key="FalseConnector">505,640 600,640 600,729</av:PointCollection>
            <av:PointCollection x:Key="TrueConnector">435,640 320,640 320,729</av:PointCollection>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowStep_71">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <av:Point x:Key="ShapeLocation">349,489</av:Point>
            <av:Size x:Key="ShapeSize">242,62</av:Size>
            <av:PointCollection x:Key="ConnectorLocation">470,551 470,596.5</av:PointCollection>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowDecision_12" sap:VirtualizedContainerService.HintSize="70,87">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
            <av:Point x:Key="ShapeLocation">265,376.5</av:Point>
            <av:Size x:Key="ShapeSize">70,87</av:Size>
            <av:PointCollection x:Key="FalseConnector">335,420 470,420 470,489</av:PointCollection>
            <av:PointCollection x:Key="TrueConnector">265,420 140,420 140,499</av:PointCollection>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowStep_72">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <av:Point x:Key="ShapeLocation">179,261</av:Point>
            <av:Size x:Key="ShapeSize">242,62</av:Size>
            <av:PointCollection x:Key="ConnectorLocation">300,323 300,376.5</av:PointCollection>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowStep_73">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <av:Point x:Key="ShapeLocation">200,209</av:Point>
            <av:Size x:Key="ShapeSize">200,22</av:Size>
            <av:PointCollection x:Key="ConnectorLocation">300,231 300,261</av:PointCollection>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowStep_41">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <av:Point x:Key="ShapeLocation">179,119</av:Point>
            <av:Size x:Key="ShapeSize">242,62</av:Size>
            <av:PointCollection x:Key="ConnectorLocation">300,181 300,209</av:PointCollection>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="Flowchart_8" sap:VirtualizedContainerService.HintSize="200,51">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">False</x:Boolean>
            <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
            <av:Size x:Key="ShapeSize">60,75</av:Size>
            <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,119</av:PointCollection>
            <x:Boolean x:Key="IsPinned">False</x:Boolean>
            <x:Double x:Key="Height">2237.9760592355192</x:Double>
            <x:Double x:Key="Width">1100.391201128162</x:Double>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="Assign_41" sap:VirtualizedContainerService.HintSize="242,62" />
      <sap2010:ViewStateData Id="Assign_42" sap:VirtualizedContainerService.HintSize="242,62" />
      <sap2010:ViewStateData Id="Assign_54" sap:VirtualizedContainerService.HintSize="242,62" />
      <sap2010:ViewStateData Id="Assign_55" sap:VirtualizedContainerService.HintSize="242,62" />
      <sap2010:ViewStateData Id="Throw_13" sap:VirtualizedContainerService.HintSize="242,22" />
      <sap2010:ViewStateData Id="Sequence_6" sap:VirtualizedContainerService.HintSize="264,554">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="Catch`1_6" sap:VirtualizedContainerService.HintSize="400,627">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
            <x:Boolean x:Key="IsPinned">False</x:Boolean>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="Throw_14" sap:VirtualizedContainerService.HintSize="200,22" />
      <sap2010:ViewStateData Id="Catch`1_7" sap:VirtualizedContainerService.HintSize="400,21">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">False</x:Boolean>
            <x:Boolean x:Key="IsPinned">False</x:Boolean>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="TryCatch_2" sap:VirtualizedContainerService.HintSize="414,811">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="MLC.Wms.Workflows.Wf_Data.SET_ORDER_RESERVE_1" sap:VirtualizedContainerService.HintSize="458,389" />
    </sap2010:ViewStateManager>
  </sap2010:WorkflowViewState.ViewStateManager>
</Activity>