<Activity mc:Ignorable="sap sap2010 sads" x:Class="MLC.Wms.Workflows.Wf_Data.SET_ORDER_DS"
 xmlns="http://schemas.microsoft.com/netfx/2009/xaml/activities"
 xmlns:av="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
 xmlns:mca="clr-namespace:Microsoft.CSharp.Activities;assembly=System.Activities"
 xmlns:mwad="clr-namespace:MLC.WF.Activities.DataAccess;assembly=MLC.WF.Activities"
 xmlns:mwam="clr-namespace:MLC.WF.Activities.Manage;assembly=MLC.WF.Activities"
 xmlns:mwice="clr-namespace:MLC.Wms.Integration.Common.Exceptions;assembly=MLC.Wms.Integration.Common"
 xmlns:mwicm="clr-namespace:MLC.Wms.Integration.Common.Message;assembly=MLC.Wms.Integration.Common"
 xmlns:mwme="clr-namespace:MLC.Wms.Model.Entities;assembly=MLC.Wms.Model"
 xmlns:n="clr-namespace:NHibernate;assembly=NHibernate"
 xmlns:s="clr-namespace:System;assembly=mscorlib"
 xmlns:sads="http://schemas.microsoft.com/netfx/2010/xaml/activities/debugger"
 xmlns:sap="http://schemas.microsoft.com/netfx/2009/xaml/activities/presentation"
 xmlns:sap2010="http://schemas.microsoft.com/netfx/2010/xaml/activities/presentation"
 xmlns:scg="clr-namespace:System.Collections.Generic;assembly=mscorlib"
 xmlns:sco="clr-namespace:System.Collections.ObjectModel;assembly=mscorlib"
 xmlns:sle="clr-namespace:System.Linq.Expressions;assembly=System.Core"
 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
  <x:Members>
    <x:Property Name="MandantCode" Type="InArgument(x:String)" />
    <x:Property Name="QueueMessage" Type="InArgument(mwme:IoQueueIn)" />
    <x:Property Name="Setting" Type="InArgument(scg:IDictionary(x:String, x:Object))" />
  </x:Members>
  <sap2010:ExpressionActivityEditor.ExpressionActivityEditor>C#</sap2010:ExpressionActivityEditor.ExpressionActivityEditor>
  <sap2010:WorkflowViewState.IdRef>SET_ORDER_DS</sap2010:WorkflowViewState.IdRef>
  <TextExpression.NamespacesForImplementation>
    <sco:Collection x:TypeArguments="x:String">
      <x:String>System</x:String>
      <x:String>System.Collections.Generic</x:String>
      <x:String>System.Data</x:String>
      <x:String>System.Linq</x:String>
      <x:String>System.Text</x:String>
      <x:String>MLC.Wms.Model.Entities</x:String>
      <x:String>MLC.Wms.Integration.Common</x:String>
      <x:String>MLC.Wms.Integration.Common.Entities</x:String>
      <x:String>MLC.Wms.Integration.Common.Message</x:String>
      <x:String>MLC.Wms.Integration.Common.Exceptions</x:String>
      <x:String>NHibernate</x:String>
      <x:String>NHibernate.Linq</x:String>
      <x:String>WebClient.Abac</x:String>
      <x:String>MLC.Wms.Api</x:String>
      <x:String>MLC.WF.Activities.Exceptions</x:String>
    </sco:Collection>
  </TextExpression.NamespacesForImplementation>
  <TextExpression.ReferencesForImplementation>
    <sco:Collection x:TypeArguments="AssemblyReference">
      <AssemblyReference>Iesi.Collections</AssemblyReference>
      <AssemblyReference>log4net</AssemblyReference>
      <AssemblyReference>Microsoft.Activities.Extensions</AssemblyReference>
      <AssemblyReference>Microsoft.CSharp</AssemblyReference>
      <AssemblyReference>Microsoft.Practices.Unity</AssemblyReference>
      <AssemblyReference>Microsoft.Practices.Unity.Configuration</AssemblyReference>
      <AssemblyReference>Microsoft.Practices.Unity.RegistrationByConvention</AssemblyReference>
      <AssemblyReference>MLC.WF.Activities</AssemblyReference>
      <AssemblyReference>MLC.WF.Core</AssemblyReference>
      <AssemblyReference>Newtonsoft.Json</AssemblyReference>
      <AssemblyReference>NHibernate</AssemblyReference>
      <AssemblyReference>PresentationCore</AssemblyReference>
      <AssemblyReference>PresentationFramework</AssemblyReference>
      <AssemblyReference>Serialize.Linq</AssemblyReference>
      <AssemblyReference>System</AssemblyReference>
      <AssemblyReference>System.Activities</AssemblyReference>
      <AssemblyReference>System.Activities.DurableInstancing</AssemblyReference>
      <AssemblyReference>System.Activities.Presentation</AssemblyReference>
      <AssemblyReference>System.Configuration</AssemblyReference>
      <AssemblyReference>System.Core</AssemblyReference>
      <AssemblyReference>System.Data</AssemblyReference>
      <AssemblyReference>System.Drawing</AssemblyReference>
      <AssemblyReference>System.Linq.Dynamic</AssemblyReference>
      <AssemblyReference>System.Runtime.DurableInstancing</AssemblyReference>
      <AssemblyReference>System.Runtime.Serialization</AssemblyReference>
      <AssemblyReference>System.ServiceModel</AssemblyReference>
      <AssemblyReference>System.ServiceModel.Activities</AssemblyReference>
      <AssemblyReference>System.Web</AssemblyReference>
      <AssemblyReference>System.Xaml</AssemblyReference>
      <AssemblyReference>System.Xml</AssemblyReference>
      <AssemblyReference>System.Xml.Linq</AssemblyReference>
      <AssemblyReference>WebClient.Abac</AssemblyReference>
      <AssemblyReference>WebClient.Common</AssemblyReference>
      <AssemblyReference>WindowsBase</AssemblyReference>
      <AssemblyReference>MLC.Wms.Api</AssemblyReference>
      <AssemblyReference>MLC.Wms.Bootstrap</AssemblyReference>
      <AssemblyReference>MLC.Wms.Common</AssemblyReference>
      <AssemblyReference>MLC.Wms.Integration.Common</AssemblyReference>
      <AssemblyReference>MLC.Wms.Model</AssemblyReference>
      <AssemblyReference>MLC.Wms.WF.Activities</AssemblyReference>
      <AssemblyReference>mscorlib</AssemblyReference>
      <AssemblyReference>MLC.Wms.Workflows</AssemblyReference>
    </sco:Collection>
  </TextExpression.ReferencesForImplementation>
  <Flowchart DisplayName="Процесс" sap2010:WorkflowViewState.IdRef="Flowchart_31">
    <Flowchart.Variables>
      <Variable x:TypeArguments="mwicm:DSState" Name="inputData" />
      <Variable x:TypeArguments="scg:IEnumerable(mwme:WmsOWB)" Name="owbList" />
      <Variable x:TypeArguments="s:String[]" Name="statusOWB">
        <Variable.Default>
          <mca:CSharpValue x:TypeArguments="s:String[]">new string[] { "OWB_NONE", "OWB_CANCELED", "OWB_COMPLETED" }</mca:CSharpValue>
        </Variable.Default>
      </Variable>
      <Variable x:TypeArguments="scg:List(mwice:BaseIntegrationException)" Name="ErrorList">
        <Variable.Default>
          <mca:CSharpValue x:TypeArguments="scg:List(mwice:BaseIntegrationException)">new List&lt;BaseIntegrationException&gt;()</mca:CSharpValue>
        </Variable.Default>
      </Variable>
      <Variable x:TypeArguments="mwicm:ErrorMessage" Name="errorMessage" />
    </Flowchart.Variables>
    <Flowchart.StartNode>
      <FlowStep x:Name="__ReferenceID19" sap2010:WorkflowViewState.IdRef="FlowStep_212">
        <Assign DisplayName="get messageData" sap2010:WorkflowViewState.IdRef="Assign_147">
          <Assign.To>
            <OutArgument x:TypeArguments="mwicm:DSState">
              <mca:CSharpReference x:TypeArguments="mwicm:DSState">inputData</mca:CSharpReference>
            </OutArgument>
          </Assign.To>
          <Assign.Value>
            <InArgument x:TypeArguments="mwicm:DSState">
              <mca:CSharpValue x:TypeArguments="mwicm:DSState">SerializationHelper.Deserialize&lt;DSState&gt;(QueueMessage.Data)</mca:CSharpValue>
            </InArgument>
          </Assign.Value>
        </Assign>
        <FlowStep.Next>
          <FlowDecision x:Name="__ReferenceID20" DisplayName="Data is null" sap2010:WorkflowViewState.IdRef="FlowDecision_44">
            <FlowDecision.Condition>
              <mca:CSharpValue x:TypeArguments="x:Boolean">inputData == null</mca:CSharpValue>
            </FlowDecision.Condition>
            <FlowDecision.True>
              <FlowStep x:Name="__ReferenceID24" sap2010:WorkflowViewState.IdRef="FlowStep_217">
                <AddToCollection x:TypeArguments="mwice:BaseIntegrationException" DisplayName="AddToCollection&lt;BaseIntegrationException&gt;" sap2010:WorkflowViewState.IdRef="AddToCollection`1_36">
                  <AddToCollection.Item>
                    <InArgument x:TypeArguments="mwice:BaseIntegrationException">
                      <mca:CSharpValue x:TypeArguments="mwice:BaseIntegrationException">new LogicalIntegrationException("Message.Data is null")</mca:CSharpValue>
                    </InArgument>
                  </AddToCollection.Item>
                  <InArgument x:TypeArguments="scg:ICollection(mwice:BaseIntegrationException)">
                    <mca:CSharpValue x:TypeArguments="scg:ICollection(mwice:BaseIntegrationException)">ErrorList</mca:CSharpValue>
                  </InArgument>
                </AddToCollection>
                <FlowStep.Next>
                  <FlowStep x:Name="__ReferenceID6" sap2010:WorkflowViewState.IdRef="FlowStep_187">
                    <Flowchart DisplayName="Запись сообщения в исходящую очередь" sap2010:WorkflowViewState.IdRef="Flowchart_39">
                      <Flowchart.Variables>
                        <Variable x:TypeArguments="mwme:IoQueueOut" Name="ioQueueOut" />
                        <Variable x:TypeArguments="n:ISession" Name="session" />
                        <Variable x:TypeArguments="x:String" Name="uri" />
                      </Flowchart.Variables>
                      <Flowchart.StartNode>
                        <FlowStep x:Name="__ReferenceID2" sap2010:WorkflowViewState.IdRef="FlowStep_216">
                          <mwad:SessionGet sap2010:WorkflowViewState.IdRef="SessionGet_1">
                            <mwad:SessionGet.Session>
                              <OutArgument x:TypeArguments="n:ISession">
                                <mca:CSharpReference x:TypeArguments="n:ISession">session</mca:CSharpReference>
                              </OutArgument>
                            </mwad:SessionGet.Session>
                          </mwad:SessionGet>
                          <FlowStep.Next>
                            <FlowStep x:Name="__ReferenceID4" sap2010:WorkflowViewState.IdRef="FlowStep_215">
                              <Assign sap2010:WorkflowViewState.IdRef="Assign_149">
                                <Assign.To>
                                  <OutArgument x:TypeArguments="x:String">
                                    <mca:CSharpReference x:TypeArguments="x:String">uri</mca:CSharpReference>
                                  </OutArgument>
                                </Assign.To>
                                <Assign.Value>
                                  <InArgument x:TypeArguments="x:String">
                                    <mca:CSharpValue x:TypeArguments="x:String">string.Format("ENTITYKEY={0}; ENTITY=OWB;", inputData == null ? null : inputData.OWBName)</mca:CSharpValue>
                                  </InArgument>
                                </Assign.Value>
                              </Assign>
                              <FlowStep.Next>
                                <FlowStep x:Name="__ReferenceID3" sap2010:WorkflowViewState.IdRef="FlowStep_214">
                                  <ForEach x:TypeArguments="mwice:BaseIntegrationException" DisplayName="Проставим Uri" sap2010:WorkflowViewState.IdRef="ForEach`1_10">
                                    <ForEach.Values>
                                      <InArgument x:TypeArguments="scg:IEnumerable(mwice:BaseIntegrationException)">
                                        <mca:CSharpValue x:TypeArguments="scg:IEnumerable(mwice:BaseIntegrationException)">ErrorList</mca:CSharpValue>
                                      </InArgument>
                                    </ForEach.Values>
                                    <ActivityAction x:TypeArguments="mwice:BaseIntegrationException">
                                      <ActivityAction.Argument>
                                        <DelegateInArgument x:TypeArguments="mwice:BaseIntegrationException" Name="item" />
                                      </ActivityAction.Argument>
                                      <Assign sap2010:WorkflowViewState.IdRef="Assign_150">
                                        <Assign.To>
                                          <OutArgument x:TypeArguments="x:String">
                                            <mca:CSharpReference x:TypeArguments="x:String">item.Uri</mca:CSharpReference>
                                          </OutArgument>
                                        </Assign.To>
                                        <Assign.Value>
                                          <InArgument x:TypeArguments="x:String">
                                            <mca:CSharpValue x:TypeArguments="x:String">uri</mca:CSharpValue>
                                          </InArgument>
                                        </Assign.Value>
                                      </Assign>
                                    </ActivityAction>
                                  </ForEach>
                                  <FlowStep.Next>
                                    <FlowStep x:Name="__ReferenceID5" sap2010:WorkflowViewState.IdRef="FlowStep_213">
                                      <Assign sap2010:WorkflowViewState.IdRef="Assign_151">
                                        <Assign.To>
                                          <OutArgument x:TypeArguments="mwicm:ErrorMessage">
                                            <mca:CSharpReference x:TypeArguments="mwicm:ErrorMessage">errorMessage</mca:CSharpReference>
                                          </OutArgument>
                                        </Assign.To>
                                        <Assign.Value>
                                          <InArgument x:TypeArguments="mwicm:ErrorMessage">
                                            <mca:CSharpValue x:TypeArguments="mwicm:ErrorMessage" xml:space="preserve">new ErrorMessage() {
    CommandList = inputData.CommandList == null ? null : inputData.CommandList,
    ErrorInfoList = ErrorList.Select(i =&gt; IntegrationErrorInfoProvider.GetErrorInfo(i)).ToList() }</mca:CSharpValue>
                                          </InArgument>
                                        </Assign.Value>
                                      </Assign>
                                      <FlowStep.Next>
                                        <FlowStep x:Name="__ReferenceID1" sap2010:WorkflowViewState.IdRef="FlowStep_185">
                                          <Assign DisplayName="ioQueueOut" sap2010:WorkflowViewState.IdRef="Assign_141">
                                            <Assign.To>
                                              <OutArgument x:TypeArguments="mwme:IoQueueOut">
                                                <mca:CSharpReference x:TypeArguments="mwme:IoQueueOut">ioQueueOut</mca:CSharpReference>
                                              </OutArgument>
                                            </Assign.To>
                                            <Assign.Value>
                                              <InArgument x:TypeArguments="mwme:IoQueueOut">
                                                <mca:CSharpValue x:TypeArguments="mwme:IoQueueOut" xml:space="preserve">new IoQueueOut()
            {
                QueueMessageType = session.Query&lt;IoQueueMessageType&gt;().First(t =&gt; t.Code == "DATA_LOAD_FEEDBACK"),
                QueueMessageState = QueueMessageStates.Ready,
                GroupCode = null,
                ProcessCode = Guid.NewGuid().ToString(),
                Mandant = session.Query&lt;WmsMandant&gt;().First(m =&gt; m.PartnerCode == MandantCode),
                QueueIn = QueueMessage,
                Message = null,
                Data = SerializationHelper.SerializeToBytes(errorMessage),
                RequiredProcessDate = DateTime.Now,
                Selector = null,
                Uri = "ENTITY=OWB;QUEUEMESSAGETYPE=SET_ORDER_DS;"
            }</mca:CSharpValue>
                                              </InArgument>
                                            </Assign.Value>
                                          </Assign>
                                          <FlowStep.Next>
                                            <FlowStep x:Name="__ReferenceID0" sap2010:WorkflowViewState.IdRef="FlowStep_184">
                                              <mwad:EntityAdd Entities="{x:Null}" DisplayName="OUT" sap2010:WorkflowViewState.IdRef="EntityAdd_9">
                                                <mwad:EntityAdd.Entity>
                                                  <InArgument x:TypeArguments="x:Object">
                                                    <mca:CSharpValue x:TypeArguments="x:Object">ioQueueOut</mca:CSharpValue>
                                                  </InArgument>
                                                </mwad:EntityAdd.Entity>
                                              </mwad:EntityAdd>
                                            </FlowStep>
                                          </FlowStep.Next>
                                        </FlowStep>
                                      </FlowStep.Next>
                                    </FlowStep>
                                  </FlowStep.Next>
                                </FlowStep>
                              </FlowStep.Next>
                            </FlowStep>
                          </FlowStep.Next>
                        </FlowStep>
                      </Flowchart.StartNode>
                      <x:Reference>__ReferenceID0</x:Reference>
                      <x:Reference>__ReferenceID1</x:Reference>
                      <x:Reference>__ReferenceID2</x:Reference>
                      <x:Reference>__ReferenceID3</x:Reference>
                      <x:Reference>__ReferenceID4</x:Reference>
                      <x:Reference>__ReferenceID5</x:Reference>
                    </Flowchart>
                    <FlowStep.Next>
                      <FlowStep x:Name="__ReferenceID17" sap2010:WorkflowViewState.IdRef="FlowStep_182">
                        <Throw sap2010:WorkflowViewState.IdRef="Throw_27">
                          <InArgument x:TypeArguments="s:Exception">
                            <mca:CSharpValue x:TypeArguments="s:Exception">new AllowCommitException("Error when working 'SET_ORDER_DS'")</mca:CSharpValue>
                          </InArgument>
                        </Throw>
                      </FlowStep>
                    </FlowStep.Next>
                  </FlowStep>
                </FlowStep.Next>
              </FlowStep>
            </FlowDecision.True>
            <FlowDecision.False>
              <FlowDecision x:Name="__ReferenceID22" DisplayName="mandatory" sap2010:WorkflowViewState.IdRef="FlowDecision_43">
                <FlowDecision.Condition>
                  <mca:CSharpValue x:TypeArguments="x:Boolean">string.IsNullOrEmpty(inputData.OWBName) || string.IsNullOrEmpty(inputData.PartnerOrder) || string.IsNullOrEmpty(inputData.DeliveryServiceRef)</mca:CSharpValue>
                </FlowDecision.Condition>
                <FlowDecision.True>
                  <FlowStep x:Name="__ReferenceID21" sap2010:WorkflowViewState.IdRef="FlowStep_211">
                    <Sequence sap2010:WorkflowViewState.IdRef="Sequence_21">
                      <If sap2010:WorkflowViewState.IdRef="If_21">
                        <If.Condition>
                          <InArgument x:TypeArguments="x:Boolean">
                            <mca:CSharpValue x:TypeArguments="x:Boolean">string.IsNullOrEmpty(inputData.OWBName)</mca:CSharpValue>
                          </InArgument>
                        </If.Condition>
                        <If.Then>
                          <AddToCollection x:TypeArguments="mwice:BaseIntegrationException" DisplayName="AddToCollection&lt;BaseIntegrationException&gt;" sap2010:WorkflowViewState.IdRef="AddToCollection`1_37">
                            <AddToCollection.Item>
                              <InArgument x:TypeArguments="mwice:BaseIntegrationException">
                                <mca:CSharpValue x:TypeArguments="mwice:BaseIntegrationException">new LogicalIntegrationException("OWBName is null")</mca:CSharpValue>
                              </InArgument>
                            </AddToCollection.Item>
                            <InArgument x:TypeArguments="scg:ICollection(mwice:BaseIntegrationException)">
                              <mca:CSharpValue x:TypeArguments="scg:ICollection(mwice:BaseIntegrationException)">ErrorList</mca:CSharpValue>
                            </InArgument>
                          </AddToCollection>
                        </If.Then>
                      </If>
                      <If sap2010:WorkflowViewState.IdRef="If_22">
                        <If.Condition>
                          <InArgument x:TypeArguments="x:Boolean">
                            <mca:CSharpValue x:TypeArguments="x:Boolean">string.IsNullOrEmpty(inputData.PartnerOrder)</mca:CSharpValue>
                          </InArgument>
                        </If.Condition>
                        <If.Then>
                          <AddToCollection x:TypeArguments="mwice:BaseIntegrationException" DisplayName="AddToCollection&lt;BaseIntegrationException&gt;" sap2010:WorkflowViewState.IdRef="AddToCollection`1_38">
                            <AddToCollection.Item>
                              <InArgument x:TypeArguments="mwice:BaseIntegrationException">
                                <mca:CSharpValue x:TypeArguments="mwice:BaseIntegrationException">new LogicalIntegrationException("PartnerOrder is null")</mca:CSharpValue>
                              </InArgument>
                            </AddToCollection.Item>
                            <InArgument x:TypeArguments="scg:ICollection(mwice:BaseIntegrationException)">
                              <mca:CSharpValue x:TypeArguments="scg:ICollection(mwice:BaseIntegrationException)">ErrorList</mca:CSharpValue>
                            </InArgument>
                          </AddToCollection>
                        </If.Then>
                      </If>
                      <If sap2010:WorkflowViewState.IdRef="If_23">
                        <If.Condition>
                          <InArgument x:TypeArguments="x:Boolean">
                            <mca:CSharpValue x:TypeArguments="x:Boolean">string.IsNullOrEmpty(inputData.DeliveryServiceRef)</mca:CSharpValue>
                          </InArgument>
                        </If.Condition>
                        <If.Then>
                          <AddToCollection x:TypeArguments="mwice:BaseIntegrationException" DisplayName="AddToCollection&lt;BaseIntegrationException&gt;" sap2010:WorkflowViewState.IdRef="AddToCollection`1_39">
                            <AddToCollection.Item>
                              <InArgument x:TypeArguments="mwice:BaseIntegrationException">
                                <mca:CSharpValue x:TypeArguments="mwice:BaseIntegrationException">new LogicalIntegrationException("DeliveryServiceRef is null")</mca:CSharpValue>
                              </InArgument>
                            </AddToCollection.Item>
                            <InArgument x:TypeArguments="scg:ICollection(mwice:BaseIntegrationException)">
                              <mca:CSharpValue x:TypeArguments="scg:ICollection(mwice:BaseIntegrationException)">ErrorList</mca:CSharpValue>
                            </InArgument>
                          </AddToCollection>
                        </If.Then>
                      </If>
                    </Sequence>
                    <FlowStep.Next>
                      <x:Reference>__ReferenceID6</x:Reference>
                    </FlowStep.Next>
                  </FlowStep>
                </FlowDecision.True>
                <FlowDecision.False>
                  <FlowStep x:Name="__ReferenceID23" sap2010:WorkflowViewState.IdRef="FlowStep_225">
                    <TryCatch sap2010:WorkflowViewState.IdRef="TryCatch_1">
                      <TryCatch.Try>
                        <Sequence sap2010:WorkflowViewState.IdRef="Sequence_22">
                          <Sequence.Variables>
                            <Variable x:TypeArguments="n:ISession" Name="session" />
                          </Sequence.Variables>
                          <mwad:EntityListLinqQuery x:TypeArguments="mwme:WmsOWB" DisplayName="Ищем накладные" sap2010:WorkflowViewState.IdRef="EntityListLinqQuery`1_6">
                            <mwad:EntityListLinqQuery.Result>
                              <OutArgument x:TypeArguments="scg:IEnumerable(mwme:WmsOWB)">
                                <mca:CSharpReference x:TypeArguments="scg:IEnumerable(mwme:WmsOWB)">owbList</mca:CSharpReference>
                              </OutArgument>
                            </mwad:EntityListLinqQuery.Result>
                            <InArgument x:TypeArguments="sle:Expression(s:Func(mwme:WmsOWB, x:Boolean))">
                              <mca:CSharpValue x:TypeArguments="sle:Expression(s:Func(mwme:WmsOWB, x:Boolean))" xml:space="preserve">o =&gt;  o.OWBName.ToUpper() == inputData.OWBName.ToUpper() &amp;&amp;
      !statusOWB.Contains(o.Status.StatusCode)</mca:CSharpValue>
                            </InArgument>
                          </mwad:EntityListLinqQuery>
                          <If sap2010:WorkflowViewState.IdRef="If_24">
                            <If.Condition>
                              <InArgument x:TypeArguments="x:Boolean">
                                <mca:CSharpValue x:TypeArguments="x:Boolean">owbList != null &amp;&amp; owbList.Any()</mca:CSharpValue>
                              </InArgument>
                            </If.Condition>
                            <If.Then>
                              <Flowchart sap2010:WorkflowViewState.IdRef="Flowchart_43">
                                <Flowchart.Variables>
                                  <Variable x:TypeArguments="scg:IEnumerable(mwme:WmsPartner)" Name="partners" />
                                </Flowchart.Variables>
                                <Flowchart.StartNode>
                                  <FlowStep x:Name="__ReferenceID16" sap2010:WorkflowViewState.IdRef="FlowStep_231">
                                    <mwad:EntityListLinqQuery x:TypeArguments="mwme:WmsPartner" sap2010:WorkflowViewState.IdRef="EntityListLinqQuery`1_7">
                                      <mwad:EntityListLinqQuery.Result>
                                        <OutArgument x:TypeArguments="scg:IEnumerable(mwme:WmsPartner)">
                                          <mca:CSharpReference x:TypeArguments="scg:IEnumerable(mwme:WmsPartner)">partners</mca:CSharpReference>
                                        </OutArgument>
                                      </mwad:EntityListLinqQuery.Result>
                                      <InArgument x:TypeArguments="sle:Expression(s:Func(mwme:WmsPartner, x:Boolean))">
                                        <mca:CSharpValue x:TypeArguments="sle:Expression(s:Func(mwme:WmsPartner, x:Boolean))" xml:space="preserve">p =&gt; p.PartnerLink2Mandant.PartnerCode == MandantCode &amp;&amp;
     p.PartnerHostRef.ToUpper() == inputData.DeliveryServiceRef.ToUpper()</mca:CSharpValue>
                                      </InArgument>
                                    </mwad:EntityListLinqQuery>
                                    <FlowStep.Next>
                                      <FlowDecision x:Name="__ReferenceID15" sap2010:WorkflowViewState.IdRef="FlowDecision_48">
                                        <FlowDecision.Condition>
                                          <mca:CSharpValue x:TypeArguments="x:Boolean">partners == null || !partners.Any()</mca:CSharpValue>
                                        </FlowDecision.Condition>
                                        <FlowDecision.True>
                                          <FlowStep x:Name="__ReferenceID14" sap2010:WorkflowViewState.IdRef="FlowStep_229">
                                            <mwad:EntityListLinqQuery x:TypeArguments="mwme:WmsPartner" sap2010:WorkflowViewState.IdRef="EntityListLinqQuery`1_8">
                                              <mwad:EntityListLinqQuery.Result>
                                                <OutArgument x:TypeArguments="scg:IEnumerable(mwme:WmsPartner)">
                                                  <mca:CSharpReference x:TypeArguments="scg:IEnumerable(mwme:WmsPartner)">partners</mca:CSharpReference>
                                                </OutArgument>
                                              </mwad:EntityListLinqQuery.Result>
                                              <InArgument x:TypeArguments="sle:Expression(s:Func(mwme:WmsPartner, x:Boolean))">
                                                <mca:CSharpValue x:TypeArguments="sle:Expression(s:Func(mwme:WmsPartner, x:Boolean))" xml:space="preserve">p =&gt; p.PartnerLink2Mandant.PartnerCode == MandantCode &amp;&amp;
     p.PartnerName.ToUpper() == inputData.DeliveryServiceRef.ToUpper()</mca:CSharpValue>
                                              </InArgument>
                                            </mwad:EntityListLinqQuery>
                                            <FlowStep.Next>
                                              <FlowDecision x:Name="__ReferenceID8" sap2010:WorkflowViewState.IdRef="FlowDecision_47">
                                                <FlowDecision.Condition>
                                                  <mca:CSharpValue x:TypeArguments="x:Boolean">partners == null || !partners.Any()</mca:CSharpValue>
                                                </FlowDecision.Condition>
                                                <FlowDecision.True>
                                                  <FlowStep x:Name="__ReferenceID7" sap2010:WorkflowViewState.IdRef="FlowStep_226">
                                                    <AddToCollection x:TypeArguments="mwice:BaseIntegrationException" DisplayName="AddToCollection&lt;BaseIntegrationException&gt;" sap2010:WorkflowViewState.IdRef="AddToCollection`1_44">
                                                      <AddToCollection.Item>
                                                        <InArgument x:TypeArguments="mwice:BaseIntegrationException">
                                                          <mca:CSharpValue x:TypeArguments="mwice:BaseIntegrationException">new LogicalIntegrationException(string.Format("Did not match any Parent by PartnerHostRef and PartnerName :'{0}', CodeMandant :'{1}'", inputData.DeliveryServiceRef, MandantCode))</mca:CSharpValue>
                                                        </InArgument>
                                                      </AddToCollection.Item>
                                                      <InArgument x:TypeArguments="scg:ICollection(mwice:BaseIntegrationException)">
                                                        <mca:CSharpValue x:TypeArguments="scg:ICollection(mwice:BaseIntegrationException)">ErrorList</mca:CSharpValue>
                                                      </InArgument>
                                                    </AddToCollection>
                                                  </FlowStep>
                                                </FlowDecision.True>
                                                <FlowDecision.False>
                                                  <FlowSwitch x:TypeArguments="x:Int32" x:Name="__ReferenceID12" sap2010:WorkflowViewState.IdRef="FlowSwitch`1_5">
                                                    <FlowSwitch.Default>
                                                      <FlowStep x:Name="__ReferenceID13" sap2010:WorkflowViewState.IdRef="FlowStep_227">
                                                        <AddToCollection x:TypeArguments="mwice:BaseIntegrationException" DisplayName="AddToCollection&lt;BaseIntegrationException&gt;" sap2010:WorkflowViewState.IdRef="AddToCollection`1_45">
                                                          <AddToCollection.Item>
                                                            <InArgument x:TypeArguments="mwice:BaseIntegrationException">
                                                              <mca:CSharpValue x:TypeArguments="mwice:BaseIntegrationException">new LogicalIntegrationException(string.Format("Found more than one Partner on PartnerName :'{0}', CodeMandant :'{1}'", inputData.DeliveryServiceRef, MandantCode))</mca:CSharpValue>
                                                            </InArgument>
                                                          </AddToCollection.Item>
                                                          <InArgument x:TypeArguments="scg:ICollection(mwice:BaseIntegrationException)">
                                                            <mca:CSharpValue x:TypeArguments="scg:ICollection(mwice:BaseIntegrationException)">ErrorList</mca:CSharpValue>
                                                          </InArgument>
                                                        </AddToCollection>
                                                      </FlowStep>
                                                    </FlowSwitch.Default>
                                                    <FlowSwitch.Expression>
                                                      <mca:CSharpValue x:TypeArguments="x:Int32">partners.Count()</mca:CSharpValue>
                                                    </FlowSwitch.Expression>
                                                    <x:Reference>__ReferenceID7<x:Key>0</x:Key></x:Reference>
                                                    <FlowStep x:Key="1" x:Name="__ReferenceID9" sap2010:WorkflowViewState.IdRef="FlowStep_228">
                                                      <ForEach x:TypeArguments="mwme:WmsOWB" DisplayName="Для каждой накладной" sap2010:WorkflowViewState.IdRef="ForEach`1_12">
                                                        <ForEach.Values>
                                                          <InArgument x:TypeArguments="scg:IEnumerable(mwme:WmsOWB)">
                                                            <mca:CSharpValue x:TypeArguments="scg:IEnumerable(mwme:WmsOWB)">owbList</mca:CSharpValue>
                                                          </InArgument>
                                                        </ForEach.Values>
                                                        <ActivityAction x:TypeArguments="mwme:WmsOWB">
                                                          <ActivityAction.Argument>
                                                            <DelegateInArgument x:TypeArguments="mwme:WmsOWB" Name="item" />
                                                          </ActivityAction.Argument>
                                                          <Sequence sap2010:WorkflowViewState.IdRef="Sequence_23">
                                                            <Assign sap2010:WorkflowViewState.IdRef="Assign_154">
                                                              <Assign.To>
                                                                <OutArgument x:TypeArguments="mwme:WmsPartner">
                                                                  <mca:CSharpReference x:TypeArguments="mwme:WmsPartner">item.OWBCarrier</mca:CSharpReference>
                                                                </OutArgument>
                                                              </Assign.To>
                                                              <Assign.Value>
                                                                <InArgument x:TypeArguments="mwme:WmsPartner">
                                                                  <mca:CSharpValue x:TypeArguments="mwme:WmsPartner">partners.First()</mca:CSharpValue>
                                                                </InArgument>
                                                              </Assign.Value>
                                                            </Assign>
                                                            <Assign sap2010:WorkflowViewState.IdRef="Assign_155">
                                                              <Assign.To>
                                                                <OutArgument x:TypeArguments="x:String">
                                                                  <mca:CSharpReference x:TypeArguments="x:String">item.OWBPartnerOrder</mca:CSharpReference>
                                                                </OutArgument>
                                                              </Assign.To>
                                                              <Assign.Value>
                                                                <InArgument x:TypeArguments="x:String">
                                                                  <mca:CSharpValue x:TypeArguments="x:String">inputData.PartnerOrder</mca:CSharpValue>
                                                                </InArgument>
                                                              </Assign.Value>
                                                            </Assign>
                                                          </Sequence>
                                                        </ActivityAction>
                                                      </ForEach>
                                                    </FlowStep>
                                                  </FlowSwitch>
                                                </FlowDecision.False>
                                              </FlowDecision>
                                            </FlowStep.Next>
                                          </FlowStep>
                                        </FlowDecision.True>
                                        <FlowDecision.False>
                                          <FlowSwitch x:TypeArguments="x:Int32" x:Name="__ReferenceID10" sap2010:WorkflowViewState.IdRef="FlowSwitch`1_6">
                                            <FlowSwitch.Default>
                                              <FlowStep x:Name="__ReferenceID11" sap2010:WorkflowViewState.IdRef="FlowStep_230">
                                                <AddToCollection x:TypeArguments="mwice:BaseIntegrationException" DisplayName="AddToCollection&lt;BaseIntegrationException&gt;" sap2010:WorkflowViewState.IdRef="AddToCollection`1_46">
                                                  <AddToCollection.Item>
                                                    <InArgument x:TypeArguments="mwice:BaseIntegrationException">
                                                      <mca:CSharpValue x:TypeArguments="mwice:BaseIntegrationException">new LogicalIntegrationException(string.Format("Found more than one Partner on PartnerHostRef :'{0}', CodeMandant :'{1}'", inputData.DeliveryServiceRef, MandantCode))</mca:CSharpValue>
                                                    </InArgument>
                                                  </AddToCollection.Item>
                                                  <InArgument x:TypeArguments="scg:ICollection(mwice:BaseIntegrationException)">
                                                    <mca:CSharpValue x:TypeArguments="scg:ICollection(mwice:BaseIntegrationException)">ErrorList</mca:CSharpValue>
                                                  </InArgument>
                                                </AddToCollection>
                                              </FlowStep>
                                            </FlowSwitch.Default>
                                            <FlowSwitch.Expression>
                                              <mca:CSharpValue x:TypeArguments="x:Int32">partners.Count()</mca:CSharpValue>
                                            </FlowSwitch.Expression>
                                            <x:Reference>__ReferenceID8<x:Key>0</x:Key></x:Reference>
                                            <x:Reference>__ReferenceID9<x:Key>1</x:Key></x:Reference>
                                          </FlowSwitch>
                                        </FlowDecision.False>
                                      </FlowDecision>
                                    </FlowStep.Next>
                                  </FlowStep>
                                </Flowchart.StartNode>
                                <x:Reference>__ReferenceID9</x:Reference>
                                <x:Reference>__ReferenceID10</x:Reference>
                                <x:Reference>__ReferenceID11</x:Reference>
                                <x:Reference>__ReferenceID12</x:Reference>
                                <x:Reference>__ReferenceID13</x:Reference>
                                <x:Reference>__ReferenceID7</x:Reference>
                                <x:Reference>__ReferenceID8</x:Reference>
                                <x:Reference>__ReferenceID14</x:Reference>
                                <x:Reference>__ReferenceID15</x:Reference>
                                <x:Reference>__ReferenceID16</x:Reference>
                              </Flowchart>
                            </If.Then>
                            <If.Else>
                              <mwam:Exit sap2010:WorkflowViewState.IdRef="Exit_1" />
                            </If.Else>
                          </If>
                        </Sequence>
                      </TryCatch.Try>
                      <TryCatch.Catches>
                        <Catch x:TypeArguments="s:Exception" sap2010:WorkflowViewState.IdRef="Catch`1_1">
                          <ActivityAction x:TypeArguments="s:Exception">
                            <ActivityAction.Argument>
                              <DelegateInArgument x:TypeArguments="s:Exception" Name="exception" />
                            </ActivityAction.Argument>
                            <AddToCollection x:TypeArguments="mwice:BaseIntegrationException" DisplayName="AddToCollection&lt;BaseIntegrationException&gt;" sap2010:WorkflowViewState.IdRef="AddToCollection`1_43">
                              <AddToCollection.Item>
                                <InArgument x:TypeArguments="mwice:BaseIntegrationException">
                                  <mca:CSharpValue x:TypeArguments="mwice:BaseIntegrationException">new TechnicalIntegrationException(string.Format("При изменении владельца товара по накладной возникла техническая ошибка:{ 0 }", exception.Message), exception.InnerException)</mca:CSharpValue>
                                </InArgument>
                              </AddToCollection.Item>
                              <InArgument x:TypeArguments="scg:ICollection(mwice:BaseIntegrationException)">
                                <mca:CSharpValue x:TypeArguments="scg:ICollection(mwice:BaseIntegrationException)">ErrorList</mca:CSharpValue>
                              </InArgument>
                            </AddToCollection>
                          </ActivityAction>
                        </Catch>
                      </TryCatch.Catches>
                    </TryCatch>
                    <FlowStep.Next>
                      <FlowDecision x:Name="__ReferenceID18" DisplayName="errors" sap2010:WorkflowViewState.IdRef="FlowDecision_36">
                        <FlowDecision.Condition>
                          <mca:CSharpValue x:TypeArguments="x:Boolean">ErrorList.Count &gt; 0</mca:CSharpValue>
                        </FlowDecision.Condition>
                        <FlowDecision.True>
                          <x:Reference>__ReferenceID6</x:Reference>
                        </FlowDecision.True>
                      </FlowDecision>
                    </FlowStep.Next>
                  </FlowStep>
                </FlowDecision.False>
              </FlowDecision>
            </FlowDecision.False>
          </FlowDecision>
        </FlowStep.Next>
      </FlowStep>
    </Flowchart.StartNode>
    <x:Reference>__ReferenceID6</x:Reference>
    <x:Reference>__ReferenceID17</x:Reference>
    <x:Reference>__ReferenceID18</x:Reference>
    <x:Reference>__ReferenceID19</x:Reference>
    <x:Reference>__ReferenceID20</x:Reference>
    <x:Reference>__ReferenceID21</x:Reference>
    <x:Reference>__ReferenceID22</x:Reference>
    <x:Reference>__ReferenceID23</x:Reference>
    <x:Reference>__ReferenceID24</x:Reference>
    <sads:DebugSymbol.Symbol>d3VEOlxNYXJ5c2hldmFfb3ZcUHJvamVjdFxNTEMuV21zLldlYkFwcFxzcmNcTUxDLldtc1xNTEMuV21zLldvcmtmbG93c1xXZl9EYXRhXElOVEVHUkFUSU9OLklOJFNFVF9PUkRFUl9EUyQxLjAuMC4wLnhhbWxZXAPOBA8CAQFiC2KHAQIBC2cLZ5MBAgECbgl5EgMByQR9D31fAwHABJsCE5sC3wEDAbcE4QIVsQQgAwGgArUEG7UEcAMBlwKNARWKAiEDAYkBjQIZkQIhAgF/nwIV2QIgAgEngQERigEjAgEUdg92kwEDAdMEcQ9xYwMBygTjAhmcBCQDAbYCpAQdrQQvAwGhApUBG5sBLQMBigKeAR+pASgDAfEBrAEjwwEtAwHJAcYBJ9MBMAMBsAHWASvuATQDAZcB8QEv9wFAAwGKAY8CHY8CmwEDAYABoAIXsgIcAgFiswIXxQIcAgFFxgIX2AIcAgEoiAEViAGDAQIBHoQBF4QBogECARXnAhvxAjYDAaIE8gIbmwQgAwG3AqsEIasEjwEDAawCpwQjpwSlAgMBogKYASGYAXADAYsCpgElpgG8AQMB/gGhASWhAW4DAfIBrwEprwGXAQMB5QG2ASfBATADAcoBzgEt0AF4AwG9AckBLckBiQEDAbEB3gEx6wEgAwGkAdkBMdkBiAEDAZgB9AE19AF9AwGLAaMCHaMCgwECAWOnAhuwAi0CAWy2Ah22AogBAgFGugIbwwItAgFPyQIdyQKOAQIBKc0CG9YCLQIBMuoCIeoCggEDAa0E7gIf7wJBAwGjBPUCIfUCiAEDAbgC+QIflgQrAwHDApkEH5kEVQMBwgK+AS2+AW4DAdgBuQEtuQF7AwHLAa4CH64CjQECAXaqAiGqAqcBAgFtwQIfwQKNAQIBWb0CIb0CrAECAVDUAh/UAo0BAgE80AIh0AKyAQIBM/8CJYkDQAMBiwSNAyuNA40BAwGABIIEL4IEfAMB9QP1AzH+A0MDAd4DxAM36QNBAwGfA58DM58DlQEDAZQDwAM3wAOEAQMBiQOzAzm8A0sDAfICowM1rANHAwHbApEDLZsDSAMBxAKCAyuCA5EBAwGXBIYDKYcDXAMBjAT8AzX8A6MBAwHqA/gDN/gDsAIDAd8DxwM9xwOWAQMB0wPOAzvnA0YDAaADugM9ugOrAQMB/gK2Az+2A7UCAwHzAqoDOaoDpwEDAecCpgM7pgPBAgMB3AKUAzOUA5kBAwHQApgDMZkDWQMBxQLPAz3aA0YDAboD2wM95gNGAwGhA9cDQ9cDmAEDAccD0gND0gOfAQMBuwPjA0PjA5cBAwGuA94DQ94DnQEDAaID</sads:DebugSymbol.Symbol>
  </Flowchart>
  <sap2010:WorkflowViewState.ViewStateManager>
    <sap2010:ViewStateManager>
      <sap2010:ViewStateData Id="Assign_147" sap:VirtualizedContainerService.HintSize="242,62">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="AddToCollection`1_36" sap:VirtualizedContainerService.HintSize="200,22" />
      <sap2010:ViewStateData Id="SessionGet_1" sap:VirtualizedContainerService.HintSize="200,22">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="Assign_149" sap:VirtualizedContainerService.HintSize="242,62" />
      <sap2010:ViewStateData Id="Assign_150" sap:VirtualizedContainerService.HintSize="242,62" />
      <sap2010:ViewStateData Id="ForEach`1_10" sap:VirtualizedContainerService.HintSize="200,52" />
      <sap2010:ViewStateData Id="Assign_151" sap:VirtualizedContainerService.HintSize="242,62">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="Assign_141" sap:VirtualizedContainerService.HintSize="242,62" />
      <sap2010:ViewStateData Id="EntityAdd_9" sap:VirtualizedContainerService.HintSize="200,62" />
      <sap2010:ViewStateData Id="FlowStep_184">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <av:Point x:Key="ShapeLocation">200,629</av:Point>
            <av:Size x:Key="ShapeSize">200,62</av:Size>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowStep_185">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <av:Point x:Key="ShapeLocation">179,529</av:Point>
            <av:Size x:Key="ShapeSize">242,62</av:Size>
            <av:PointCollection x:Key="ConnectorLocation">300,591 300,629</av:PointCollection>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowStep_213">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <av:Point x:Key="ShapeLocation">178.895,426.02</av:Point>
            <av:Size x:Key="ShapeSize">242,62</av:Size>
            <av:PointCollection x:Key="ConnectorLocation">299.895,488.02 299.895,518.02 300,518.02 300,529</av:PointCollection>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowStep_214">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <av:Point x:Key="ShapeLocation">200,324.02</av:Point>
            <av:Size x:Key="ShapeSize">200,52</av:Size>
            <av:PointCollection x:Key="ConnectorLocation">300,376.02 300,406.02 299.895,406.02 299.895,426.02</av:PointCollection>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowStep_215">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <av:Point x:Key="ShapeLocation">179,209</av:Point>
            <av:Size x:Key="ShapeSize">242,62</av:Size>
            <av:PointCollection x:Key="ConnectorLocation">300,271 300,324.02</av:PointCollection>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowStep_216">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <av:Point x:Key="ShapeLocation">200,137</av:Point>
            <av:Size x:Key="ShapeSize">200,22</av:Size>
            <av:PointCollection x:Key="ConnectorLocation">300,159 300,209</av:PointCollection>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="Flowchart_39" sap:VirtualizedContainerService.HintSize="200,52">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
            <av:Point x:Key="ShapeLocation">270,2.5</av:Point>
            <av:Size x:Key="ShapeSize">60,75</av:Size>
            <av:PointCollection x:Key="ConnectorLocation">300,77.5 300,137</av:PointCollection>
            <x:Double x:Key="Height">691</x:Double>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="Throw_27" sap:VirtualizedContainerService.HintSize="200,22">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowStep_182">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <av:Point x:Key="ShapeLocation">210,829</av:Point>
            <av:Size x:Key="ShapeSize">200,22</av:Size>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowStep_187">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <av:Point x:Key="ShapeLocation">210,734</av:Point>
            <av:Size x:Key="ShapeSize">200,52</av:Size>
            <av:PointCollection x:Key="ConnectorLocation">310,786 310,829</av:PointCollection>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowStep_217">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <av:Point x:Key="ShapeLocation">30,397</av:Point>
            <av:Size x:Key="ShapeSize">200,22</av:Size>
            <av:PointCollection x:Key="ConnectorLocation">130,419 130,760 210,760</av:PointCollection>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="AddToCollection`1_37" sap:VirtualizedContainerService.HintSize="200,22" />
      <sap2010:ViewStateData Id="If_21" sap:VirtualizedContainerService.HintSize="464,212">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
            <x:Boolean x:Key="IsPinned">False</x:Boolean>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="AddToCollection`1_38" sap:VirtualizedContainerService.HintSize="200,22" />
      <sap2010:ViewStateData Id="If_22" sap:VirtualizedContainerService.HintSize="464,212">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
            <x:Boolean x:Key="IsPinned">False</x:Boolean>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="AddToCollection`1_39" sap:VirtualizedContainerService.HintSize="200,22" />
      <sap2010:ViewStateData Id="If_23" sap:VirtualizedContainerService.HintSize="464,212">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
            <x:Boolean x:Key="IsPinned">False</x:Boolean>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="Sequence_21" sap:VirtualizedContainerService.HintSize="200,52">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowStep_211">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <av:Point x:Key="ShapeLocation">210,554</av:Point>
            <av:Size x:Key="ShapeSize">200,52</av:Size>
            <av:PointCollection x:Key="ConnectorLocation">310,606 310,734</av:PointCollection>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="EntityListLinqQuery`1_6" sap:VirtualizedContainerService.HintSize="476,104">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="EntityListLinqQuery`1_7" sap:VirtualizedContainerService.HintSize="496,104" />
      <sap2010:ViewStateData Id="EntityListLinqQuery`1_8" sap:VirtualizedContainerService.HintSize="486,104" />
      <sap2010:ViewStateData Id="AddToCollection`1_44" sap:VirtualizedContainerService.HintSize="200,22" />
      <sap2010:ViewStateData Id="FlowStep_226">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <av:Point x:Key="ShapeLocation">10,819</av:Point>
            <av:Size x:Key="ShapeSize">200,22</av:Size>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="AddToCollection`1_45" sap:VirtualizedContainerService.HintSize="200,22" />
      <sap2010:ViewStateData Id="FlowStep_227">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <av:Point x:Key="ShapeLocation">290,945</av:Point>
            <av:Size x:Key="ShapeSize">200,22</av:Size>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="Assign_154" sap:VirtualizedContainerService.HintSize="242,62" />
      <sap2010:ViewStateData Id="Assign_155" sap:VirtualizedContainerService.HintSize="242,62" />
      <sap2010:ViewStateData Id="Sequence_23" sap:VirtualizedContainerService.HintSize="264,288">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="ForEach`1_12" sap:VirtualizedContainerService.HintSize="200,52">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">False</x:Boolean>
            <x:Boolean x:Key="IsPinned">False</x:Boolean>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowStep_228">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <av:Point x:Key="ShapeLocation">560,804</av:Point>
            <av:Size x:Key="ShapeSize">200,52</av:Size>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowSwitch`1_5" sap:VirtualizedContainerService.HintSize="70,87">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
            <av:Point x:Key="ShapeLocation">355,786.5</av:Point>
            <av:Size x:Key="ShapeSize">70,87</av:Size>
            <av:PointCollection x:Key="0Connector">355,830 210,830</av:PointCollection>
            <av:PointCollection x:Key="1Connector">425,830 560,830</av:PointCollection>
            <av:PointCollection x:Key="Default">390,873.5 390,945</av:PointCollection>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowDecision_47" sap:VirtualizedContainerService.HintSize="70,87">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
            <av:Point x:Key="ShapeLocation">225,646.5</av:Point>
            <av:Size x:Key="ShapeSize">70,87</av:Size>
            <av:PointCollection x:Key="FalseConnector">295,690 390,690 390,786.5</av:PointCollection>
            <av:PointCollection x:Key="TrueConnector">225,690 110,690 110,819</av:PointCollection>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowStep_229">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <av:Point x:Key="ShapeLocation">12,450</av:Point>
            <av:Size x:Key="ShapeSize">486,104</av:Size>
            <av:PointCollection x:Key="ConnectorLocation">255,554 255,584 260,584 260,646.5</av:PointCollection>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="AddToCollection`1_46" sap:VirtualizedContainerService.HintSize="200,22" />
      <sap2010:ViewStateData Id="FlowStep_230">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <av:Point x:Key="ShapeLocation">550,949</av:Point>
            <av:Size x:Key="ShapeSize">200,22</av:Size>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowSwitch`1_6" sap:VirtualizedContainerService.HintSize="70,87">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
            <av:Point x:Key="ShapeLocation">625,566.5</av:Point>
            <av:Size x:Key="ShapeSize">70,87</av:Size>
            <av:PointCollection x:Key="0Connector">625,631.75 260,631.75 260,646.5</av:PointCollection>
            <av:PointCollection x:Key="1Connector">660,653.5 660,804</av:PointCollection>
            <av:PointCollection x:Key="Default">695,631.75 810,631.75 810,960 750,960</av:PointCollection>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowDecision_48" sap:VirtualizedContainerService.HintSize="70,87">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
            <av:Point x:Key="ShapeLocation">315,296.5</av:Point>
            <av:Size x:Key="ShapeSize">70,87</av:Size>
            <av:PointCollection x:Key="FalseConnector">385,340 660,340 660,566.5</av:PointCollection>
            <av:PointCollection x:Key="TrueConnector">315,340 255,340 255,450</av:PointCollection>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowStep_231">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <av:Point x:Key="ShapeLocation">102,130</av:Point>
            <av:Size x:Key="ShapeSize">496,104</av:Size>
            <av:PointCollection x:Key="ConnectorLocation">350,234 350,296.5</av:PointCollection>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="Flowchart_43" sap:VirtualizedContainerService.HintSize="200,52">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">False</x:Boolean>
            <av:Point x:Key="ShapeLocation">320,2.5</av:Point>
            <av:Size x:Key="ShapeSize">60,75</av:Size>
            <x:Double x:Key="Width">850</x:Double>
            <x:Double x:Key="Height">1031</x:Double>
            <av:PointCollection x:Key="ConnectorLocation">350,77.5 350,130</av:PointCollection>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="Exit_1" sap:VirtualizedContainerService.HintSize="200,22" />
      <sap2010:ViewStateData Id="If_24" sap:VirtualizedContainerService.HintSize="476,212">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
            <x:Boolean x:Key="IsPinned">False</x:Boolean>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="Sequence_22" sap:VirtualizedContainerService.HintSize="200,52">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">False</x:Boolean>
            <x:Boolean x:Key="IsPinned">False</x:Boolean>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="AddToCollection`1_43" sap:VirtualizedContainerService.HintSize="200,22" />
      <sap2010:ViewStateData Id="Catch`1_1" sap:VirtualizedContainerService.HintSize="404,22">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">False</x:Boolean>
            <x:Boolean x:Key="IsPinned">False</x:Boolean>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="TryCatch_1" sap:VirtualizedContainerService.HintSize="200,52">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowDecision_36" sap:VirtualizedContainerService.HintSize="70,87">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
            <av:Point x:Key="ShapeLocation">535,716.5</av:Point>
            <av:Size x:Key="ShapeSize">70,87</av:Size>
            <av:PointCollection x:Key="TrueConnector">535,760 410,760</av:PointCollection>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowStep_225">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <av:Point x:Key="ShapeLocation">469.5,546.04</av:Point>
            <av:Size x:Key="ShapeSize">200,52</av:Size>
            <av:PointCollection x:Key="ConnectorLocation">569.5,597.04 569.5,627.04 570,627.04 570,716.5</av:PointCollection>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowDecision_43" sap:VirtualizedContainerService.HintSize="70,87">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
            <av:Point x:Key="ShapeLocation">405,366.5</av:Point>
            <av:Size x:Key="ShapeSize">70,87</av:Size>
            <av:PointCollection x:Key="TrueConnector">405,410 310,410 310,554</av:PointCollection>
            <av:PointCollection x:Key="FalseConnector">475,410 569.5,410 569.5,546.04</av:PointCollection>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowDecision_44" sap:VirtualizedContainerService.HintSize="70,87">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">True</x:Boolean>
            <av:Point x:Key="ShapeLocation">265,246.5</av:Point>
            <av:Size x:Key="ShapeSize">70,87</av:Size>
            <av:PointCollection x:Key="FalseConnector">335,290 440,290 440,366.5</av:PointCollection>
            <av:PointCollection x:Key="TrueConnector">265,290 130,290 130,397</av:PointCollection>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="FlowStep_212">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <av:Point x:Key="ShapeLocation">179,129</av:Point>
            <av:Size x:Key="ShapeSize">242,62</av:Size>
            <av:PointCollection x:Key="ConnectorLocation">300,191 300,246.5</av:PointCollection>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="Flowchart_31" sap:VirtualizedContainerService.HintSize="684,887">
        <sap:WorkflowViewStateService.ViewState>
          <scg:Dictionary x:TypeArguments="x:String, x:Object">
            <x:Boolean x:Key="IsExpanded">False</x:Boolean>
            <av:Point x:Key="ShapeLocation">270,12.5</av:Point>
            <av:Size x:Key="ShapeSize">60,75</av:Size>
            <x:Boolean x:Key="IsPinned">False</x:Boolean>
            <x:Double x:Key="Width">669.5</x:Double>
            <x:Double x:Key="Height">851</x:Double>
            <av:PointCollection x:Key="ConnectorLocation">300,87.5 300,129</av:PointCollection>
          </scg:Dictionary>
        </sap:WorkflowViewStateService.ViewState>
      </sap2010:ViewStateData>
      <sap2010:ViewStateData Id="SET_ORDER_DS" sap:VirtualizedContainerService.HintSize="724,967" />
    </sap2010:ViewStateManager>
  </sap2010:WorkflowViewState.ViewStateManager>
</Activity>